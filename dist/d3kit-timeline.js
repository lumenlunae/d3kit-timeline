!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3kit"),require("d3-array"),require("d3-axis"),require("labella"),require("d3-scale"),require("d3-transition")):"function"==typeof define&&define.amd?define(["d3kit","d3-array","d3-axis","labella","d3-scale","d3-transition"],e):"object"==typeof exports?exports.d3KitTimeline=e(require("d3kit"),require("d3-array"),require("d3-axis"),require("labella"),require("d3-scale"),require("d3-transition")):t.d3KitTimeline=e(t.d3Kit,t.d3,t.d3,t.labella,t.d3,t.d3)}(window,function(t,e,a,i,o,s){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(i,o,function(e){return t[e]}.bind(null,o));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=5)}([function(e,a){e.exports=t},function(t,a){t.exports=e},function(t,e){t.exports=a},function(t,e){t.exports=i},function(t,e){t.exports=o},function(t,e,a){t.exports=a(6)},function(t,e,a){"use strict";a.r(e);var i=a(2),o=a(4),s=(a(7),a(1)),n=a(0),r=a(3),l=a.n(r);const d=t=>t.w,c=t=>t.h,f=t=>t;e.default=class extends n.SvgChart{static getDefaultOptions(){return n.helper.deepExtend(super.getDefaultOptions(),{margin:{left:40,right:20,top:20,bottom:20},initialWidth:400,initialHeight:400,scale:Object(o.scaleTime)(),domain:void 0,direction:"right",dotRadius:3,formatAxis:f,layerGap:60,labella:{},keyFn:void 0,timeFn:t=>t.time,endTimeFn:t=>t.end_time,textFn:t=>t.text,offsetFn:t=>t.offset,offsetTangentFn:t=>t.offsetTangent,textOffsetFn:t=>t.textOffset,endDotColor:"#009900",dotColor:"#222",labelBgColor:"#222",labelTextColor:"#fff",lineColor:"#222",linkColor:"#222",labelPadding:{left:4,right:4,top:3,bottom:2},textYOffset:"0.85em"})}static getCustomEventNames(){return["dotClick","dotMouseover","dotMousemove","dotMouseout","dotMouseenter","dotMouseleave","labelClick","labelMouseover","labelMousemove","labelMouseenter","labelMouseleave","labelMouseout"]}constructor(t,e){super(t,e),this.layers.create(["dummy",{main:["axis","link","label","dot"]}]),this.layers.get("main/axis").classed("axis",!0),this.force=new l.a.Force(e.labella),this.updateLabelText=this.updateLabelText.bind(this),this.visualize=this.visualize.bind(this),this.on("data",this.visualize),this.on("options",this.visualize),this.on("resize",this.visualize)}resizeToFit(){const t=this.options();let e;const a=this.force.nodes();switch(t.direction){case"up":e=Object(s.max)(a,t=>Math.abs(t.y))||0,this.height(e+t.margin.top+t.margin.bottom);break;case"down":e=Object(s.max)(a,t=>Math.abs(t.y+t.dy))||0,this.height(e+t.margin.top+t.margin.bottom);break;case"left":e=Object(s.max)(a,t=>Math.abs(t.x))||0,this.width(e+t.margin.left+t.margin.right);break;case"right":e=Object(s.max)(a,t=>Math.abs(t.x+t.dx))||0,this.width(e+t.margin.left+t.margin.right)}return this}updateLabelText(t,e,a){const i=this.options();return a=a?n.helper.functor(a):f,t.text(t=>i.textFn(a(t))).attr("dy",i.textYOffset).attr("x",i.labelPadding.left).attr("y",i.labelPadding.top),Object.keys(e).forEach(i=>{const o=e[i];t.style(i,(t,e)=>o(a(t),e))}),t}drawAxes(){const t=this.options();let e;switch(t.direction){case"right":this.axis=Object(i.axisLeft)(),e="translate(0,0)";break;case"left":this.axis=Object(i.axisRight)(),e=`translate(${this.getInnerWidth()},0)`;break;case"up":this.axis=Object(i.axisBottom)(),e=`translate(0,${this.getInnerHeight()})`;break;case"down":this.axis=Object(i.axisTop)(),e="translate(0,0)"}return this.layers.get("main").attr("transform",e),(t.formatAxis||f)(this.axis.scale(t.scale)),this.layers.get("main/axis").call(this.axis),this}drawDots(t){const e=this.options(),a=t=>e.scale(e.timeFn(t)),i=this.layers.get("main/dot").selectAll("circle.dot").data(t,e.keyFn),o="left"===e.direction||"right"===e.direction?"cy":"cx",s="cy"===o?"cx":"cy",n="cy"===o?"x":"y",r="cy"===o?"y":"x";if("transparent"===e.dotColor?(i.enter().append("rect").classed("dot",!0).style("stroke",e.lineColor).attr(n,t=>e.offsetFn(t)).attr(r,t=>a(t)+e.offsetTangentFn(t)).attr("width",e.dotRadius).attr("height",1),i.transition().style("stroke",e.lineColor).attr(n,t=>e.offsetFn(t)).attr(r,t=>a(t)+e.offsetTangentFn(t)).attr("width",e.dotRadius).attr("height",1)):(i.enter().append("circle").classed("dot",!0).on("click",this.dispatchAs("dotClick")).on("mouseover",this.dispatchAs("dotMouseover")).on("mousemove",this.dispatchAs("dotMousemove")).on("mouseout",this.dispatchAs("dotMouseout")).on("mouseenter",this.dispatchAs("dotMouseenter")).on("mouseleave",this.dispatchAs("dotMouseleave")).style("fill",e.dotColor).attr("r",e.dotRadius).attr(o,t=>a(t)+e.offsetTangentFn(t)).attr(s,t=>e.offsetFn(t)),i.transition().style("fill",e.dotColor).attr("r",e.dotRadius).attr(o,t=>a(t)+e.offsetTangentFn(t)).attr(s,t=>e.offsetFn(t))),e.endTimeFn){const t=t=>e.scale(e.endTimeFn(t));"transparent"===e.endDotColor?(i.enter().append("rect").classed("dot",!0).style("stroke",e.lineColor).attr(n,t=>e.offsetFn(t)).attr(r,a=>t(a)+e.offsetTangentFn(a)).attr("width",e.dotRadius).attr("height",1),i.transition().style("stroke",e.lineColor).attr(n,t=>e.offsetFn(t)).attr(r,a=>t(a)+e.offsetTangentFn(a)).attr("width",e.dotRadius).attr("height",1)):(i.enter().append("circle").classed("dot",!0).style("fill",e.endDotColor).attr("r",e.dotRadius).attr(o,a=>t(a)+e.offsetTangentFn(a)).attr(s,t=>e.offsetFn(t)),i.transition().style("fill",e.endDotColor).attr("r",e.dotRadius).attr(o,a=>t(a)+e.offsetTangentFn(a)).attr(s,t=>e.offsetFn(t))),i.enter().append("rect").classed("time-duration",!0).style("stroke",e.lineColor).attr(n,t=>e.offsetFn(t)).attr(r,t=>a(t)+e.offsetTangentFn(t)).attr("width",1).attr("height",e=>t(e)-a(e)),i.transition().style("stroke",e.lineColor).attr(n,t=>e.offsetFn(t)).attr(r,t=>a(t)+e.offsetTangentFn(t)).attr("width",1).attr("height",e=>t(e)-a(e))}return i.exit().remove(),this}drawLabels(t,e){const a=this.options();let i;i="left"===a.direction||"right"===a.direction?Object(s.max)(t,d):Object(s.max)(t,c);const o=new l.a.Renderer({nodeHeight:i,layerGap:a.layerGap,direction:a.direction});function r(t){const e=a.offsetFn(t.data),o=a.offsetTangentFn(t.data)+a.textOffsetFn(t.data);switch(a.direction){case"right":return`translate(${t.x+e},${o+t.y-t.dy/2})`;case"left":return`translate(${t.x+i-t.w-e},${o+t.y-t.dy/2})`;case"up":return`translate(${o+t.x-t.dx/2},${t.y+e})`;case"down":return`translate(${o+t.x-t.dx/2},${t.y-e})`}}o.layout(t);const f=n.helper.functor(a.labelBgColor),h=n.helper.functor(a.linkColor),u=this.layers.get("main/label").selectAll("g.label-g").data(t,a.keyFn?t=>a.keyFn(t.data):void 0),p=u.enter().append("g").classed("label-g",!0).on("click",this.dispatchAs("labelClick")).on("mouseover",this.dispatchAs("labelMouseover")).on("mousemove",this.dispatchAs("labelMousemove")).on("mouseenter",this.dispatchAs("labelMouseenter")).on("mouseleave",this.dispatchAs("labelMouseleave")).on("mouseout",this.dispatchAs("labelMouseout")).attr("transform",r);p.append("rect").classed("label-bg",!0).attr("rx",2).attr("ry",2).attr("width",d).attr("height",c).style("fill",t=>f(t.data)),p.append("text").classed("label-text",!0).call(this.updateLabelText,e,t=>t.data);const b=u.transition().attr("transform",r);b.select("rect").attr("width",d).attr("height",c).style("fill",t=>f(t.data)),b.select("text.label-text").call(this.updateLabelText,e,t=>t.data),u.exit().remove();const g=this.layers.get("main/link").selectAll("path.link").data(t,a.keyFn?t=>a.keyFn(t.data):void 0);return g.enter().append("path").classed("link",!0).attr("d",t=>o.generatePath(t)).style("stroke",t=>h(t.data)).style("fill","none").attr("transform",t=>{const e=a.offsetFn(t.data),i=a.offsetTangentFn(t.data);return"left"===a.direction||"right"===a.direction?`translate(${e}, ${i})`:`translate(${i}, ${e})`}),g.transition().attr("d",t=>o.generatePath(t)).style("stroke",t=>h(t.data)).attr("transform",t=>{const e=a.offsetFn(t.data),i=a.offsetTangentFn(t.data);return"left"===a.direction||"right"===a.direction?`translate(${e}, ${i})`:`translate(${i}, ${e})`}),g.exit().remove(),this}visualize(){if(!this.hasData()||!this.hasNonZeroArea())return;const t=this.data()||[],e=this.options();this.force=new l.a.Force(e.labella),e.domain?e.scale.domain(e.domain):e.scale.domain(Object(s.extent)(t,e.timeFn)).nice(),e.scale.range([0,"left"===e.direction||"right"===e.direction?this.getInnerHeight():this.getInnerWidth()]);const a=n.helper.extend({},e.textStyle);Object.keys(a).forEach(t=>{a[t]=n.helper.functor(a[t])}),a.fill=a.fill||n.helper.functor(e.labelTextColor);const i=this.layers.get("dummy").append("text").classed("label-text",!0),o=t.map(t=>{const o=i.call(this.updateLabelText,a,t).node().getBBox(),s=o.width+e.labelPadding.left+e.labelPadding.right,n=o.height+e.labelPadding.top+e.labelPadding.bottom,r=new l.a.Node((t=>e.scale(e.timeFn(t)))(t),"left"===e.direction||"right"===e.direction?n:s,t);return r.w=s,r.h=n,r});return i.remove(),this.force.options(e.labella).nodes(o).compute(),console.log(o),this.drawAxes(),this.drawDots(t),this.drawLabels(this.force.nodes(),a),this}}},function(t,e){t.exports=s}]).default});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kM0tpdFRpbWVsaW5lL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9kM0tpdFRpbWVsaW5lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2QzS2l0VGltZWxpbmUvZXh0ZXJuYWwge1wicm9vdFwiOlwiZDNLaXRcIixcImNvbW1vbmpzMlwiOlwiZDNraXRcIixcImNvbW1vbmpzXCI6XCJkM2tpdFwiLFwiYW1kXCI6XCJkM2tpdFwifSIsIndlYnBhY2s6Ly9kM0tpdFRpbWVsaW5lL2V4dGVybmFsIHtcInJvb3RcIjpcImQzXCIsXCJjb21tb25qczJcIjpcImQzLWFycmF5XCIsXCJjb21tb25qc1wiOlwiZDMtYXJyYXlcIixcImFtZFwiOlwiZDMtYXJyYXlcIn0iLCJ3ZWJwYWNrOi8vZDNLaXRUaW1lbGluZS9leHRlcm5hbCB7XCJyb290XCI6XCJkM1wiLFwiY29tbW9uanMyXCI6XCJkMy1heGlzXCIsXCJjb21tb25qc1wiOlwiZDMtYXhpc1wiLFwiYW1kXCI6XCJkMy1heGlzXCJ9Iiwid2VicGFjazovL2QzS2l0VGltZWxpbmUvZXh0ZXJuYWwge1wicm9vdFwiOlwibGFiZWxsYVwiLFwiY29tbW9uanMyXCI6XCJsYWJlbGxhXCIsXCJjb21tb25qc1wiOlwibGFiZWxsYVwiLFwiYW1kXCI6XCJsYWJlbGxhXCJ9Iiwid2VicGFjazovL2QzS2l0VGltZWxpbmUvZXh0ZXJuYWwge1wicm9vdFwiOlwiZDNcIixcImNvbW1vbmpzMlwiOlwiZDMtc2NhbGVcIixcImNvbW1vbmpzXCI6XCJkMy1zY2FsZVwiLFwiYW1kXCI6XCJkMy1zY2FsZVwifSIsIndlYnBhY2s6Ly9kM0tpdFRpbWVsaW5lLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vZDNLaXRUaW1lbGluZS9leHRlcm5hbCB7XCJyb290XCI6XCJkM1wiLFwiY29tbW9uanMyXCI6XCJkMy10cmFuc2l0aW9uXCIsXCJjb21tb25qc1wiOlwiZDMtdHJhbnNpdGlvblwiLFwiYW1kXCI6XCJkMy10cmFuc2l0aW9uXCJ9Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18yX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX180X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX183X18iLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsImQzX2F4aXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsImQzX3NjYWxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJkM19hcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fIiwiZDNraXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyIsImxhYmVsbGFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyIsImxhYmVsbGFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX19kZWZhdWx0IiwicmVjdFdpZHRoIiwidyIsInJlY3RIZWlnaHQiLCJoIiwiaWRlbnRpdHkiLCJbb2JqZWN0IE9iamVjdF0iLCJkZWVwRXh0ZW5kIiwic3VwZXIiLCJnZXREZWZhdWx0T3B0aW9ucyIsIm1hcmdpbiIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImluaXRpYWxXaWR0aCIsImluaXRpYWxIZWlnaHQiLCJzY2FsZSIsImRvbWFpbiIsInVuZGVmaW5lZCIsImRpcmVjdGlvbiIsImRvdFJhZGl1cyIsImZvcm1hdEF4aXMiLCJsYXllckdhcCIsImxhYmVsbGEiLCJrZXlGbiIsInRpbWVGbiIsInRpbWUiLCJlbmRUaW1lRm4iLCJlbmRfdGltZSIsInRleHRGbiIsInRleHQiLCJvZmZzZXRGbiIsIm9mZnNldCIsIm9mZnNldFRhbmdlbnRGbiIsIm9mZnNldFRhbmdlbnQiLCJ0ZXh0T2Zmc2V0Rm4iLCJ0ZXh0T2Zmc2V0IiwiZW5kRG90Q29sb3IiLCJkb3RDb2xvciIsImxhYmVsQmdDb2xvciIsImxhYmVsVGV4dENvbG9yIiwibGluZUNvbG9yIiwibGlua0NvbG9yIiwibGFiZWxQYWRkaW5nIiwidGV4dFlPZmZzZXQiLCJlbGVtZW50Iiwib3B0aW9ucyIsInRoaXMiLCJsYXllcnMiLCJtYWluIiwiY2xhc3NlZCIsImZvcmNlIiwiYSIsIkZvcmNlIiwidXBkYXRlTGFiZWxUZXh0IiwidmlzdWFsaXplIiwib24iLCJtYXhWYWwiLCJub2RlcyIsIk1hdGgiLCJhYnMiLCJ5IiwiaGVpZ2h0IiwiZHkiLCJ4Iiwid2lkdGgiLCJkeCIsInNlbGVjdGlvbiIsInRleHRTdHlsZSIsImFjY2Vzc29yIiwiZnVuY3RvciIsImF0dHIiLCJrZXlzIiwiZm9yRWFjaCIsInN0eWxlRm4iLCJzdHlsZSIsImF4aXNUcmFuc2Zvcm0iLCJheGlzIiwiZ2V0SW5uZXJXaWR0aCIsImdldElubmVySGVpZ2h0IiwiZGF0YSIsInRpbWVQb3MiLCJzVXBkYXRlIiwic2VsZWN0QWxsIiwiZmllbGQiLCJvcHBvc2l0ZUZpZWxkIiwiZmllbGRBeGlzIiwib3Bwb3NpdGVGaWVsZEF4aXMiLCJlbnRlciIsImFwcGVuZCIsInRyYW5zaXRpb24iLCJkaXNwYXRjaEFzIiwiZW5kVGltZVBvcyIsImV4aXQiLCJyZW1vdmUiLCJsYWJlbFRleHRTdHlsZSIsIm5vZGVIZWlnaHQiLCJyZW5kZXJlciIsIlJlbmRlcmVyIiwibm9kZVBvcyIsImxheW91dCIsInNFbnRlciIsInNUcmFucyIsInNlbGVjdCIsInBhdGhzIiwiZ2VuZXJhdGVQYXRoIiwiaGFzRGF0YSIsImhhc05vblplcm9BcmVhIiwibmljZSIsInJhbmdlIiwiZXh0ZW5kIiwiZmlsbCIsImR1bW15VGV4dCIsIm1hcCIsImJib3giLCJub2RlIiwiZ2V0QkJveCIsIk5vZGUiLCJjb21wdXRlIiwiY29uc29sZSIsImxvZyIsImRyYXdBeGVzIiwiZHJhd0RvdHMiLCJkcmF3TGFiZWxzIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxFQUFBRyxRQUFBLFNBQUFBLFFBQUEsWUFBQUEsUUFBQSxXQUFBQSxRQUFBLFdBQUFBLFFBQUEsWUFBQUEsUUFBQSxrQkFDQSxtQkFBQUMsZUFBQUMsSUFDQUQsT0FBQSxvRUFBQUosR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxjQUFBRCxFQUFBRyxRQUFBLFNBQUFBLFFBQUEsWUFBQUEsUUFBQSxXQUFBQSxRQUFBLFdBQUFBLFFBQUEsWUFBQUEsUUFBQSxrQkFFQUosRUFBQSxjQUFBQyxFQUFBRCxFQUFBLE1BQUFBLEVBQUEsR0FBQUEsRUFBQSxHQUFBQSxFQUFBLFFBQUFBLEVBQUEsR0FBQUEsRUFBQSxJQVJBLENBU0NPLE9BQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFkLFFBR0EsSUFBQUMsRUFBQVcsRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxH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SUFDQStHLEVBQUEvRyxHQUE0QmEsRUFBQSxPQUFNeUUsUUFBQXlCLEVBQUEvRyxNQUdsQytHLEVBQUFnQixLQUFBaEIsRUFBQWdCLE1BQWlEbEgsRUFBQSxPQUFNeUUsUUFBQXhCLEVBQUFOLGdCQUV2RCxNQUFBd0UsRUFBQWpFLEtBQUFDLE9BQ0ExRSxJQUFBLFNBQ0FtSCxPQUFBLFFBQ0F2QyxRQUFBLGlCQUdBUSxFQUFBc0IsRUFBQWlDLElBQUFsSixJQUNBLE1BQUFtSixFQUFBRixFQUNBcEosS0FBQW1GLEtBQUFPLGdCQUFBeUMsRUFBQWhJLEdBQ0FvSixPQUNBQyxVQUNBbkgsRUFBQWlILEVBQUFqRCxNQUFBbkIsRUFBQUgsYUFBQWpDLEtBQUFvQyxFQUFBSCxhQUFBaEMsTUFDQVIsRUFBQStHLEVBQUFwRCxPQUFBaEIsRUFBQUgsYUFBQS9CLElBQUFrQyxFQUFBSCxhQUFBOUIsT0FDQXNHLEVBQUEsSUFBdUJwSCxFQUFBcUQsRUFBT2lFLEtBUjlCdEosSUFBQStFLEVBQUE5QixNQUFBOEIsRUFBQXJCLE9BQUExRCxJQVNBa0gsQ0FBQWxILEdBQ0EsU0FBQStFLEVBQUEzQixXQUFBLFVBQUEyQixFQUFBM0IsVUFBQWhCLEVBQUFGLEVBQ0FsQyxHQUlBLE9BRkFvSixFQUFBbEgsSUFDQWtILEVBQUFoSCxJQUNBZ0gsSUFlQSxPQVpBSCxFQUFBbEIsU0FFQS9DLEtBQUFJLE1BQ0FMLFVBQUF2QixTQUNBbUMsU0FDQTRELFVBRUFDLFFBQUFDLElBQUE5RCxHQUNBWCxLQUFBMEUsV0FDQTFFLEtBQUEyRSxTQUFBMUMsR0FDQWpDLEtBQUE0RSxXQUFBNUUsS0FBQUksTUFBQU8sUUFBQXFDLEdBRUFoRCxzQkN4Y0FwRyxFQUFBRCxRQUFBVyIsImZpbGUiOiJkM2tpdC10aW1lbGluZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImQza2l0XCIpLCByZXF1aXJlKFwiZDMtYXJyYXlcIiksIHJlcXVpcmUoXCJkMy1heGlzXCIpLCByZXF1aXJlKFwibGFiZWxsYVwiKSwgcmVxdWlyZShcImQzLXNjYWxlXCIpLCByZXF1aXJlKFwiZDMtdHJhbnNpdGlvblwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJkM2tpdFwiLCBcImQzLWFycmF5XCIsIFwiZDMtYXhpc1wiLCBcImxhYmVsbGFcIiwgXCJkMy1zY2FsZVwiLCBcImQzLXRyYW5zaXRpb25cIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZDNLaXRUaW1lbGluZVwiXSA9IGZhY3RvcnkocmVxdWlyZShcImQza2l0XCIpLCByZXF1aXJlKFwiZDMtYXJyYXlcIiksIHJlcXVpcmUoXCJkMy1heGlzXCIpLCByZXF1aXJlKFwibGFiZWxsYVwiKSwgcmVxdWlyZShcImQzLXNjYWxlXCIpLCByZXF1aXJlKFwiZDMtdHJhbnNpdGlvblwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiZDNLaXRUaW1lbGluZVwiXSA9IGZhY3Rvcnkocm9vdFtcImQzS2l0XCJdLCByb290W1wiZDNcIl0sIHJvb3RbXCJkM1wiXSwgcm9vdFtcImxhYmVsbGFcIl0sIHJvb3RbXCJkM1wiXSwgcm9vdFtcImQzXCJdKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzJfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fM19fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX180X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzdfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fM19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNF9fOyIsImltcG9ydCB7IGF4aXNMZWZ0LCBheGlzUmlnaHQsIGF4aXNCb3R0b20sIGF4aXNUb3AgfSBmcm9tICdkMy1heGlzJztcbmltcG9ydCB7IHNjYWxlVGltZSB9IGZyb20gJ2QzLXNjYWxlJztcbmltcG9ydCAnZDMtdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBtYXgsIGV4dGVudCB9IGZyb20gJ2QzLWFycmF5JztcbmltcG9ydCB7IFN2Z0NoYXJ0LCBoZWxwZXIgfSBmcm9tICdkM2tpdCc7XG5pbXBvcnQgbGFiZWxsYSBmcm9tICdsYWJlbGxhJztcblxuY29uc3QgcmVjdFdpZHRoID0gZCA9PiBkLnc7XG5jb25zdCByZWN0SGVpZ2h0ID0gZCA9PiBkLmg7XG5jb25zdCBpZGVudGl0eSA9IGQgPT4gZDtcblxuY2xhc3MgVGltZWxpbmUgZXh0ZW5kcyBTdmdDaGFydCB7XG4gIHN0YXRpYyBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgICByZXR1cm4gaGVscGVyLmRlZXBFeHRlbmQoc3VwZXIuZ2V0RGVmYXVsdE9wdGlvbnMoKSwge1xuICAgICAgbWFyZ2luOiB7IGxlZnQ6IDQwLCByaWdodDogMjAsIHRvcDogMjAsIGJvdHRvbTogMjAgfSxcbiAgICAgIGluaXRpYWxXaWR0aDogNDAwLFxuICAgICAgaW5pdGlhbEhlaWdodDogNDAwLFxuICAgICAgc2NhbGU6IHNjYWxlVGltZSgpLFxuICAgICAgZG9tYWluOiB1bmRlZmluZWQsXG4gICAgICBkaXJlY3Rpb246ICdyaWdodCcsXG4gICAgICBkb3RSYWRpdXM6IDMsXG4gICAgICBmb3JtYXRBeGlzOiBpZGVudGl0eSxcbiAgICAgIGxheWVyR2FwOiA2MCxcbiAgICAgIGxhYmVsbGE6IHt9LFxuICAgICAga2V5Rm46IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVGbjogZCA9PiBkLnRpbWUsXG4gICAgICBlbmRUaW1lRm46IGQgPT4gZC5lbmRfdGltZSxcbiAgICAgIHRleHRGbjogZCA9PiBkLnRleHQsXG4gICAgICBvZmZzZXRGbjogZCA9PiBkLm9mZnNldCxcbiAgICAgIG9mZnNldFRhbmdlbnRGbjogZCA9PiBkLm9mZnNldFRhbmdlbnQsXG4gICAgICB0ZXh0T2Zmc2V0Rm46IGQgPT4gZC50ZXh0T2Zmc2V0LFxuICAgICAgZW5kRG90Q29sb3I6ICcjMDA5OTAwJyxcbiAgICAgIGRvdENvbG9yOiAnIzIyMicsXG4gICAgICBsYWJlbEJnQ29sb3I6ICcjMjIyJyxcbiAgICAgIGxhYmVsVGV4dENvbG9yOiAnI2ZmZicsXG4gICAgICBsaW5lQ29sb3I6ICcjMjIyJyxcbiAgICAgIGxpbmtDb2xvcjogJyMyMjInLFxuICAgICAgbGFiZWxQYWRkaW5nOiB7IGxlZnQ6IDQsIHJpZ2h0OiA0LCB0b3A6IDMsIGJvdHRvbTogMiB9LFxuICAgICAgdGV4dFlPZmZzZXQ6ICcwLjg1ZW0nLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldEN1c3RvbUV2ZW50TmFtZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICdkb3RDbGljaycsXG4gICAgICAnZG90TW91c2VvdmVyJyxcbiAgICAgICdkb3RNb3VzZW1vdmUnLFxuICAgICAgJ2RvdE1vdXNlb3V0JyxcbiAgICAgICdkb3RNb3VzZWVudGVyJyxcbiAgICAgICdkb3RNb3VzZWxlYXZlJyxcbiAgICAgICdsYWJlbENsaWNrJyxcbiAgICAgICdsYWJlbE1vdXNlb3ZlcicsXG4gICAgICAnbGFiZWxNb3VzZW1vdmUnLFxuICAgICAgJ2xhYmVsTW91c2VlbnRlcicsXG4gICAgICAnbGFiZWxNb3VzZWxlYXZlJyxcbiAgICAgICdsYWJlbE1vdXNlb3V0JyxcbiAgICBdO1xuICB9XG5cbiAgY29uc3RydWN0b3IoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHN1cGVyKGVsZW1lbnQsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5sYXllcnMuY3JlYXRlKFsnZHVtbXknLCB7IG1haW46IFsnYXhpcycsICdsaW5rJywgJ2xhYmVsJywgJ2RvdCddIH1dKTtcbiAgICB0aGlzLmxheWVycy5nZXQoJ21haW4vYXhpcycpLmNsYXNzZWQoJ2F4aXMnLCB0cnVlKTtcblxuICAgIHRoaXMuZm9yY2UgPSBuZXcgbGFiZWxsYS5Gb3JjZShvcHRpb25zLmxhYmVsbGEpO1xuXG4gICAgdGhpcy51cGRhdGVMYWJlbFRleHQgPSB0aGlzLnVwZGF0ZUxhYmVsVGV4dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudmlzdWFsaXplID0gdGhpcy52aXN1YWxpemUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uKCdkYXRhJywgdGhpcy52aXN1YWxpemUpO1xuICAgIHRoaXMub24oJ29wdGlvbnMnLCB0aGlzLnZpc3VhbGl6ZSk7XG4gICAgdGhpcy5vbigncmVzaXplJywgdGhpcy52aXN1YWxpemUpO1xuICB9XG5cbiAgcmVzaXplVG9GaXQoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucygpO1xuICAgIGxldCBtYXhWYWw7XG4gICAgY29uc3Qgbm9kZXMgPSB0aGlzLmZvcmNlLm5vZGVzKCk7XG5cbiAgICBzd2l0Y2ggKG9wdGlvbnMuZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlICd1cCc6XG4gICAgICAgIG1heFZhbCA9IG1heChub2RlcywgZCA9PiBNYXRoLmFicyhkLnkpKSB8fCAwO1xuICAgICAgICB0aGlzLmhlaWdodChtYXhWYWwgKyBvcHRpb25zLm1hcmdpbi50b3AgKyBvcHRpb25zLm1hcmdpbi5ib3R0b20pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICBtYXhWYWwgPSBtYXgobm9kZXMsIGQgPT4gTWF0aC5hYnMoZC55ICsgZC5keSkpIHx8IDA7XG4gICAgICAgIHRoaXMuaGVpZ2h0KG1heFZhbCArIG9wdGlvbnMubWFyZ2luLnRvcCArIG9wdGlvbnMubWFyZ2luLmJvdHRvbSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIG1heFZhbCA9IG1heChub2RlcywgZCA9PiBNYXRoLmFicyhkLngpKSB8fCAwO1xuICAgICAgICB0aGlzLndpZHRoKG1heFZhbCArIG9wdGlvbnMubWFyZ2luLmxlZnQgKyBvcHRpb25zLm1hcmdpbi5yaWdodCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICBtYXhWYWwgPSBtYXgobm9kZXMsIGQgPT4gTWF0aC5hYnMoZC54ICsgZC5keCkpIHx8IDA7XG4gICAgICAgIHRoaXMud2lkdGgobWF4VmFsICsgb3B0aW9ucy5tYXJnaW4ubGVmdCArIG9wdGlvbnMubWFyZ2luLnJpZ2h0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB1cGRhdGVMYWJlbFRleHQoc2VsZWN0aW9uLCB0ZXh0U3R5bGUsIGFjY2Vzc29yKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucygpO1xuXG4gICAgYWNjZXNzb3IgPSBhY2Nlc3NvciA/IGhlbHBlci5mdW5jdG9yKGFjY2Vzc29yKSA6IGlkZW50aXR5O1xuXG4gICAgc2VsZWN0aW9uXG4gICAgICAudGV4dChkID0+IG9wdGlvbnMudGV4dEZuKGFjY2Vzc29yKGQpKSlcbiAgICAgIC5hdHRyKCdkeScsIG9wdGlvbnMudGV4dFlPZmZzZXQpXG4gICAgICAuYXR0cigneCcsIG9wdGlvbnMubGFiZWxQYWRkaW5nLmxlZnQpXG4gICAgICAuYXR0cigneScsIG9wdGlvbnMubGFiZWxQYWRkaW5nLnRvcCk7XG5cbiAgICBPYmplY3Qua2V5cyh0ZXh0U3R5bGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3Qgc3R5bGVGbiA9IHRleHRTdHlsZVtrZXldO1xuICAgICAgc2VsZWN0aW9uLnN0eWxlKGtleSwgKGQsIGkpID0+IHN0eWxlRm4oYWNjZXNzb3IoZCksIGkpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzZWxlY3Rpb247XG4gIH1cblxuICBkcmF3QXhlcygpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zKCk7XG5cbiAgICBsZXQgYXhpc1RyYW5zZm9ybTtcblxuICAgIHN3aXRjaCAob3B0aW9ucy5kaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgdGhpcy5heGlzID0gYXhpc0xlZnQoKTtcbiAgICAgICAgYXhpc1RyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHswfSwkezB9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIHRoaXMuYXhpcyA9IGF4aXNSaWdodCgpO1xuICAgICAgICBheGlzVHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3RoaXMuZ2V0SW5uZXJXaWR0aCgpfSwkezB9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndXAnOlxuICAgICAgICB0aGlzLmF4aXMgPSBheGlzQm90dG9tKCk7XG4gICAgICAgIGF4aXNUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7MH0sJHt0aGlzLmdldElubmVySGVpZ2h0KCl9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZG93bic6XG4gICAgICAgIHRoaXMuYXhpcyA9IGF4aXNUb3AoKTtcbiAgICAgICAgYXhpc1RyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHswfSwkezB9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMubGF5ZXJzLmdldCgnbWFpbicpLmF0dHIoJ3RyYW5zZm9ybScsIGF4aXNUcmFuc2Zvcm0pO1xuXG4gICAgY29uc3QgZm9ybWF0QXhpcyA9IG9wdGlvbnMuZm9ybWF0QXhpcyB8fCBpZGVudGl0eTtcblxuICAgIGZvcm1hdEF4aXModGhpcy5heGlzLnNjYWxlKG9wdGlvbnMuc2NhbGUpKTtcblxuICAgIHRoaXMubGF5ZXJzLmdldCgnbWFpbi9heGlzJykuY2FsbCh0aGlzLmF4aXMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBkcmF3RG90cyhkYXRhKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucygpO1xuICAgIGNvbnN0IHRpbWVQb3MgPSBkID0+IG9wdGlvbnMuc2NhbGUob3B0aW9ucy50aW1lRm4oZCkpO1xuXG4gICAgY29uc3Qgc1VwZGF0ZSA9IHRoaXMubGF5ZXJzXG4gICAgICAuZ2V0KCdtYWluL2RvdCcpXG4gICAgICAuc2VsZWN0QWxsKCdjaXJjbGUuZG90JylcbiAgICAgIC5kYXRhKGRhdGEsIG9wdGlvbnMua2V5Rm4pO1xuXG4gICAgY29uc3QgZmllbGQgPSBvcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2xlZnQnIHx8IG9wdGlvbnMuZGlyZWN0aW9uID09PSAncmlnaHQnID8gJ2N5JyA6ICdjeCc7XG4gICAgY29uc3Qgb3Bwb3NpdGVGaWVsZCA9IGZpZWxkID09PSAnY3knID8gJ2N4JyA6ICdjeSc7XG5cbiAgICBjb25zdCBmaWVsZEF4aXMgPSBmaWVsZCA9PT0gJ2N5JyA/ICd4JyA6ICd5JztcbiAgICBjb25zdCBvcHBvc2l0ZUZpZWxkQXhpcyA9IGZpZWxkID09PSAnY3knID8gJ3knIDogJ3gnO1xuICAgIGlmIChvcHRpb25zLmRvdENvbG9yID09PSAndHJhbnNwYXJlbnQnKSB7XG4gICAgICBzVXBkYXRlXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAuY2xhc3NlZCgnZG90JywgdHJ1ZSlcbiAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBvcHRpb25zLmxpbmVDb2xvcilcbiAgICAgICAgLmF0dHIoZmllbGRBeGlzLCBkID0+IG9wdGlvbnMub2Zmc2V0Rm4oZCkpXG4gICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgb3B0aW9ucy5kb3RSYWRpdXMpXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCAxKTtcblxuICAgICAgc1VwZGF0ZVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgb3B0aW9ucy5saW5lQ29sb3IpXG4gICAgICAgIC5hdHRyKGZpZWxkQXhpcywgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKVxuICAgICAgICAuYXR0cihvcHBvc2l0ZUZpZWxkQXhpcywgZCA9PiB0aW1lUG9zKGQpICsgb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZCkpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIG9wdGlvbnMuZG90UmFkaXVzKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNVcGRhdGVcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgLmNsYXNzZWQoJ2RvdCcsIHRydWUpXG4gICAgICAgIC5vbignY2xpY2snLCB0aGlzLmRpc3BhdGNoQXMoJ2RvdENsaWNrJykpXG4gICAgICAgIC5vbignbW91c2VvdmVyJywgdGhpcy5kaXNwYXRjaEFzKCdkb3RNb3VzZW92ZXInKSlcbiAgICAgICAgLm9uKCdtb3VzZW1vdmUnLCB0aGlzLmRpc3BhdGNoQXMoJ2RvdE1vdXNlbW92ZScpKVxuICAgICAgICAub24oJ21vdXNlb3V0JywgdGhpcy5kaXNwYXRjaEFzKCdkb3RNb3VzZW91dCcpKVxuICAgICAgICAub24oJ21vdXNlZW50ZXInLCB0aGlzLmRpc3BhdGNoQXMoJ2RvdE1vdXNlZW50ZXInKSlcbiAgICAgICAgLm9uKCdtb3VzZWxlYXZlJywgdGhpcy5kaXNwYXRjaEFzKCdkb3RNb3VzZWxlYXZlJykpXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIG9wdGlvbnMuZG90Q29sb3IpXG4gICAgICAgIC5hdHRyKCdyJywgb3B0aW9ucy5kb3RSYWRpdXMpXG4gICAgICAgIC5hdHRyKGZpZWxkLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIob3Bwb3NpdGVGaWVsZCwgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKTtcblxuICAgICAgc1VwZGF0ZVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIG9wdGlvbnMuZG90Q29sb3IpXG4gICAgICAgIC5hdHRyKCdyJywgb3B0aW9ucy5kb3RSYWRpdXMpXG4gICAgICAgIC5hdHRyKGZpZWxkLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIob3Bwb3NpdGVGaWVsZCwgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKTtcbiAgICB9XG4gICAgLypcblxuKi9cbiAgICBpZiAob3B0aW9ucy5lbmRUaW1lRm4pIHtcbiAgICAgIGNvbnN0IGVuZFRpbWVQb3MgPSBkID0+IG9wdGlvbnMuc2NhbGUob3B0aW9ucy5lbmRUaW1lRm4oZCkpO1xuXG4gICAgICBpZiAob3B0aW9ucy5lbmREb3RDb2xvciA9PT0gJ3RyYW5zcGFyZW50Jykge1xuICAgICAgICBzVXBkYXRlXG4gICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAuY2xhc3NlZCgnZG90JywgdHJ1ZSlcbiAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIG9wdGlvbnMubGluZUNvbG9yKVxuICAgICAgICAgIC5hdHRyKGZpZWxkQXhpcywgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKVxuICAgICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IGVuZFRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBvcHRpb25zLmRvdFJhZGl1cylcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMSk7XG5cbiAgICAgICAgc1VwZGF0ZVxuICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIG9wdGlvbnMubGluZUNvbG9yKVxuICAgICAgICAgIC5hdHRyKGZpZWxkQXhpcywgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKVxuICAgICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IGVuZFRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBvcHRpb25zLmRvdFJhZGl1cylcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzVXBkYXRlXG4gICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgICAgIC5jbGFzc2VkKCdkb3QnLCB0cnVlKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIG9wdGlvbnMuZW5kRG90Q29sb3IpXG4gICAgICAgICAgLmF0dHIoJ3InLCBvcHRpb25zLmRvdFJhZGl1cylcbiAgICAgICAgICAuYXR0cihmaWVsZCwgZCA9PiBlbmRUaW1lUG9zKGQpICsgb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZCkpXG4gICAgICAgICAgLmF0dHIob3Bwb3NpdGVGaWVsZCwgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKTtcblxuICAgICAgICBzVXBkYXRlXG4gICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIG9wdGlvbnMuZW5kRG90Q29sb3IpXG4gICAgICAgICAgLmF0dHIoJ3InLCBvcHRpb25zLmRvdFJhZGl1cylcbiAgICAgICAgICAuYXR0cihmaWVsZCwgZCA9PiBlbmRUaW1lUG9zKGQpICsgb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZCkpXG4gICAgICAgICAgLmF0dHIob3Bwb3NpdGVGaWVsZCwgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKTtcbiAgICAgIH1cbiAgICAgIHNVcGRhdGVcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgIC5jbGFzc2VkKCd0aW1lLWR1cmF0aW9uJywgdHJ1ZSlcbiAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBvcHRpb25zLmxpbmVDb2xvcilcbiAgICAgICAgLmF0dHIoZmllbGRBeGlzLCBkID0+IG9wdGlvbnMub2Zmc2V0Rm4oZCkpXG4gICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgMSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGQgPT4gZW5kVGltZVBvcyhkKSAtIHRpbWVQb3MoZCkpO1xuXG4gICAgICBzVXBkYXRlXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBvcHRpb25zLmxpbmVDb2xvcilcbiAgICAgICAgLmF0dHIoZmllbGRBeGlzLCBkID0+IG9wdGlvbnMub2Zmc2V0Rm4oZCkpXG4gICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgMSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGQgPT4gZW5kVGltZVBvcyhkKSAtIHRpbWVQb3MoZCkpO1xuICAgIH1cblxuICAgIHNVcGRhdGUuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBkcmF3TGFiZWxzKG5vZGVzLCBsYWJlbFRleHRTdHlsZSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMoKTtcbiAgICBsZXQgbm9kZUhlaWdodDtcbiAgICBpZiAob3B0aW9ucy5kaXJlY3Rpb24gPT09ICdsZWZ0JyB8fCBvcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgbm9kZUhlaWdodCA9IG1heChub2RlcywgcmVjdFdpZHRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZUhlaWdodCA9IG1heChub2RlcywgcmVjdEhlaWdodCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgbGFiZWxsYS5SZW5kZXJlcih7XG4gICAgICBub2RlSGVpZ2h0LFxuICAgICAgbGF5ZXJHYXA6IG9wdGlvbnMubGF5ZXJHYXAsXG4gICAgICBkaXJlY3Rpb246IG9wdGlvbnMuZGlyZWN0aW9uLFxuICAgIH0pO1xuXG4gICAgcmVuZGVyZXIubGF5b3V0KG5vZGVzKTtcblxuICAgIGZ1bmN0aW9uIG5vZGVQb3MoZCkge1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXRGbihkLmRhdGEpO1xuICAgICAgY29uc3Qgb2Zmc2V0VGFuZ2VudCA9IG9wdGlvbnMub2Zmc2V0VGFuZ2VudEZuKGQuZGF0YSkgKyBvcHRpb25zLnRleHRPZmZzZXRGbihkLmRhdGEpO1xuXG4gICAgICBzd2l0Y2ggKG9wdGlvbnMuZGlyZWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke2QueCArIG9mZnNldH0sJHtvZmZzZXRUYW5nZW50ICsgZC55IC0gZC5keSAvIDJ9KWA7XG4gICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgIHJldHVybiBgdHJhbnNsYXRlKCR7ZC54ICsgbm9kZUhlaWdodCAtIGQudyAtIG9mZnNldH0sJHtvZmZzZXRUYW5nZW50ICsgZC55IC0gZC5keSAvIDJ9KWA7XG4gICAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldFRhbmdlbnQgKyBkLnggLSBkLmR4IC8gMn0sJHtkLnkgKyBvZmZzZXR9KWA7XG4gICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICAgIHJldHVybiBgdHJhbnNsYXRlKCR7b2Zmc2V0VGFuZ2VudCArIGQueCAtIGQuZHggLyAyfSwke2QueSAtIG9mZnNldH0pYDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsYWJlbEJnQ29sb3IgPSBoZWxwZXIuZnVuY3RvcihvcHRpb25zLmxhYmVsQmdDb2xvcik7XG4gICAgY29uc3QgbGlua0NvbG9yID0gaGVscGVyLmZ1bmN0b3Iob3B0aW9ucy5saW5rQ29sb3IpO1xuXG4gICAgLy8gRHJhdyBsYWJlbCByZWN0YW5nbGVzXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gdGhpcy5sYXllcnNcbiAgICAgIC5nZXQoJ21haW4vbGFiZWwnKVxuICAgICAgLnNlbGVjdEFsbCgnZy5sYWJlbC1nJylcbiAgICAgIC5kYXRhKG5vZGVzLCBvcHRpb25zLmtleUZuID8gZCA9PiBvcHRpb25zLmtleUZuKGQuZGF0YSkgOiB1bmRlZmluZWQpO1xuXG4gICAgY29uc3Qgc0VudGVyID0gc2VsZWN0aW9uXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAuY2xhc3NlZCgnbGFiZWwtZycsIHRydWUpXG4gICAgICAub24oJ2NsaWNrJywgdGhpcy5kaXNwYXRjaEFzKCdsYWJlbENsaWNrJykpXG4gICAgICAub24oJ21vdXNlb3ZlcicsIHRoaXMuZGlzcGF0Y2hBcygnbGFiZWxNb3VzZW92ZXInKSlcbiAgICAgIC5vbignbW91c2Vtb3ZlJywgdGhpcy5kaXNwYXRjaEFzKCdsYWJlbE1vdXNlbW92ZScpKVxuICAgICAgLm9uKCdtb3VzZWVudGVyJywgdGhpcy5kaXNwYXRjaEFzKCdsYWJlbE1vdXNlZW50ZXInKSlcbiAgICAgIC5vbignbW91c2VsZWF2ZScsIHRoaXMuZGlzcGF0Y2hBcygnbGFiZWxNb3VzZWxlYXZlJykpXG4gICAgICAub24oJ21vdXNlb3V0JywgdGhpcy5kaXNwYXRjaEFzKCdsYWJlbE1vdXNlb3V0JykpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgbm9kZVBvcyk7XG5cbiAgICBzRW50ZXJcbiAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgLmNsYXNzZWQoJ2xhYmVsLWJnJywgdHJ1ZSlcbiAgICAgIC5hdHRyKCdyeCcsIDIpXG4gICAgICAuYXR0cigncnknLCAyKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgcmVjdFdpZHRoKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIHJlY3RIZWlnaHQpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGxhYmVsQmdDb2xvcihkLmRhdGEpKTtcblxuICAgIHNFbnRlclxuICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAuY2xhc3NlZCgnbGFiZWwtdGV4dCcsIHRydWUpXG4gICAgICAuY2FsbCh0aGlzLnVwZGF0ZUxhYmVsVGV4dCwgbGFiZWxUZXh0U3R5bGUsIGQgPT4gZC5kYXRhKTtcblxuICAgIGNvbnN0IHNUcmFucyA9IHNlbGVjdGlvbi50cmFuc2l0aW9uKCkuYXR0cigndHJhbnNmb3JtJywgbm9kZVBvcyk7XG5cbiAgICBzVHJhbnNcbiAgICAgIC5zZWxlY3QoJ3JlY3QnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgcmVjdFdpZHRoKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIHJlY3RIZWlnaHQpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGxhYmVsQmdDb2xvcihkLmRhdGEpKTtcblxuICAgIHNUcmFucy5zZWxlY3QoJ3RleHQubGFiZWwtdGV4dCcpLmNhbGwodGhpcy51cGRhdGVMYWJlbFRleHQsIGxhYmVsVGV4dFN0eWxlLCBkID0+IGQuZGF0YSk7XG5cbiAgICBzZWxlY3Rpb24uZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgLy8gRHJhdyBwYXRoIGZyb20gcG9pbnQgb24gdGhlIHRpbWVsaW5lIHRvIHRoZSBsYWJlbCByZWN0YW5nbGVcbiAgICBjb25zdCBwYXRocyA9IHRoaXMubGF5ZXJzXG4gICAgICAuZ2V0KCdtYWluL2xpbmsnKVxuICAgICAgLnNlbGVjdEFsbCgncGF0aC5saW5rJylcbiAgICAgIC5kYXRhKG5vZGVzLCBvcHRpb25zLmtleUZuID8gZCA9PiBvcHRpb25zLmtleUZuKGQuZGF0YSkgOiB1bmRlZmluZWQpO1xuXG4gICAgcGF0aHNcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5jbGFzc2VkKCdsaW5rJywgdHJ1ZSlcbiAgICAgIC5hdHRyKCdkJywgZCA9PiByZW5kZXJlci5nZW5lcmF0ZVBhdGgoZCkpXG4gICAgICAuc3R5bGUoJ3N0cm9rZScsIGQgPT4gbGlua0NvbG9yKGQuZGF0YSkpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCAnbm9uZScpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpID0+IHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXRGbihkLmRhdGEpO1xuICAgICAgICBjb25zdCBvZmZzZXRUYW5nZW50ID0gb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZC5kYXRhKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlyZWN0aW9uID09PSAnbGVmdCcgfHwgb3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldH0sICR7b2Zmc2V0VGFuZ2VudH0pYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldFRhbmdlbnR9LCAke29mZnNldH0pYDtcbiAgICAgIH0pO1xuXG4gICAgcGF0aHNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5hdHRyKCdkJywgZCA9PiByZW5kZXJlci5nZW5lcmF0ZVBhdGgoZCkpXG4gICAgICAuc3R5bGUoJ3N0cm9rZScsIGQgPT4gbGlua0NvbG9yKGQuZGF0YSkpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpID0+IHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXRGbihkLmRhdGEpO1xuICAgICAgICBjb25zdCBvZmZzZXRUYW5nZW50ID0gb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZC5kYXRhKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlyZWN0aW9uID09PSAnbGVmdCcgfHwgb3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldH0sICR7b2Zmc2V0VGFuZ2VudH0pYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldFRhbmdlbnR9LCAke29mZnNldH0pYDtcbiAgICAgIH0pO1xuXG4gICAgcGF0aHMuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB2aXN1YWxpemUoKSB7XG4gICAgaWYgKCF0aGlzLmhhc0RhdGEoKSB8fCAhdGhpcy5oYXNOb25aZXJvQXJlYSgpKSByZXR1cm47XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhKCkgfHwgW107XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucygpO1xuICAgIHRoaXMuZm9yY2UgPSBuZXcgbGFiZWxsYS5Gb3JjZShvcHRpb25zLmxhYmVsbGEpO1xuXG4gICAgaWYgKG9wdGlvbnMuZG9tYWluKSB7XG4gICAgICBvcHRpb25zLnNjYWxlLmRvbWFpbihvcHRpb25zLmRvbWFpbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMuc2NhbGUuZG9tYWluKGV4dGVudChkYXRhLCBvcHRpb25zLnRpbWVGbikpLm5pY2UoKTtcbiAgICB9XG4gICAgb3B0aW9ucy5zY2FsZS5yYW5nZShbXG4gICAgICAwLFxuICAgICAgb3B0aW9ucy5kaXJlY3Rpb24gPT09ICdsZWZ0JyB8fCBvcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0J1xuICAgICAgICA/IHRoaXMuZ2V0SW5uZXJIZWlnaHQoKVxuICAgICAgICA6IHRoaXMuZ2V0SW5uZXJXaWR0aCgpLFxuICAgIF0pO1xuXG4gICAgY29uc3QgbGFiZWxUZXh0U3R5bGUgPSBoZWxwZXIuZXh0ZW5kKHt9LCBvcHRpb25zLnRleHRTdHlsZSk7XG4gICAgT2JqZWN0LmtleXMobGFiZWxUZXh0U3R5bGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgbGFiZWxUZXh0U3R5bGVba2V5XSA9IGhlbHBlci5mdW5jdG9yKGxhYmVsVGV4dFN0eWxlW2tleV0pO1xuICAgIH0pO1xuICAgIC8vIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgbGFiZWxUZXh0U3R5bGUuZmlsbCA9IGxhYmVsVGV4dFN0eWxlLmZpbGwgfHwgaGVscGVyLmZ1bmN0b3Iob3B0aW9ucy5sYWJlbFRleHRDb2xvcik7XG5cbiAgICBjb25zdCBkdW1teVRleHQgPSB0aGlzLmxheWVyc1xuICAgICAgLmdldCgnZHVtbXknKVxuICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAuY2xhc3NlZCgnbGFiZWwtdGV4dCcsIHRydWUpO1xuXG4gICAgY29uc3QgdGltZVBvcyA9IGQgPT4gb3B0aW9ucy5zY2FsZShvcHRpb25zLnRpbWVGbihkKSk7XG4gICAgY29uc3Qgbm9kZXMgPSBkYXRhLm1hcCgoZCkgPT4ge1xuICAgICAgY29uc3QgYmJveCA9IGR1bW15VGV4dFxuICAgICAgICAuY2FsbCh0aGlzLnVwZGF0ZUxhYmVsVGV4dCwgbGFiZWxUZXh0U3R5bGUsIGQpXG4gICAgICAgIC5ub2RlKClcbiAgICAgICAgLmdldEJCb3goKTtcbiAgICAgIGNvbnN0IHcgPSBiYm94LndpZHRoICsgb3B0aW9ucy5sYWJlbFBhZGRpbmcubGVmdCArIG9wdGlvbnMubGFiZWxQYWRkaW5nLnJpZ2h0O1xuICAgICAgY29uc3QgaCA9IGJib3guaGVpZ2h0ICsgb3B0aW9ucy5sYWJlbFBhZGRpbmcudG9wICsgb3B0aW9ucy5sYWJlbFBhZGRpbmcuYm90dG9tO1xuICAgICAgY29uc3Qgbm9kZSA9IG5ldyBsYWJlbGxhLk5vZGUoXG4gICAgICAgIHRpbWVQb3MoZCksXG4gICAgICAgIG9wdGlvbnMuZGlyZWN0aW9uID09PSAnbGVmdCcgfHwgb3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyaWdodCcgPyBoIDogdyxcbiAgICAgICAgZCxcbiAgICAgICk7XG4gICAgICBub2RlLncgPSB3O1xuICAgICAgbm9kZS5oID0gaDtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0pO1xuXG4gICAgZHVtbXlUZXh0LnJlbW92ZSgpO1xuXG4gICAgdGhpcy5mb3JjZVxuICAgICAgLm9wdGlvbnMob3B0aW9ucy5sYWJlbGxhKVxuICAgICAgLm5vZGVzKG5vZGVzKVxuICAgICAgLmNvbXB1dGUoKTtcblxuICAgIGNvbnNvbGUubG9nKG5vZGVzKTtcbiAgICB0aGlzLmRyYXdBeGVzKCk7XG4gICAgdGhpcy5kcmF3RG90cyhkYXRhKTtcbiAgICB0aGlzLmRyYXdMYWJlbHModGhpcy5mb3JjZS5ub2RlcygpLCBsYWJlbFRleHRTdHlsZSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaW1lbGluZTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fN19fOyJdLCJzb3VyY2VSb290IjoiIn0=