!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3kit"),require("d3-array"),require("d3-axis"),require("labella"),require("d3-scale"),require("d3-transition")):"function"==typeof define&&define.amd?define(["d3kit","d3-array","d3-axis","labella","d3-scale","d3-transition"],e):"object"==typeof exports?exports.d3KitTimeline=e(require("d3kit"),require("d3-array"),require("d3-axis"),require("labella"),require("d3-scale"),require("d3-transition")):t.d3KitTimeline=e(t.d3Kit,t.d3,t.d3,t.labella,t.d3,t.d3)}(window,function(t,e,n,r,o,a){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=o},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";n.r(e);var r=n(2),o=n(4),a=(n(7),n(1)),i=n(0),s=n(3),l=n.n(s),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var c=function(t){return t.w},f=function(t){return t.h},d=function(t){return t},h=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.layers.create(["dummy",{main:["axis","link","label","dot"]}]),r.layers.get("main/axis").classed("axis",!0),r.force=new l.a.Force(n.labella),r.updateLabelText=r.updateLabelText.bind(r),r.visualize=r.visualize.bind(r),r.on("data",r.visualize),r.on("options",r.visualize),r.on("resize",r.visualize),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i["SvgChart"]),u(e,null,[{key:"getDefaultOptions",value:function(){return i.helper.deepExtend(function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0}(e.__proto__||Object.getPrototypeOf(e),"getDefaultOptions",this).call(this),{margin:{left:40,right:20,top:20,bottom:20},initialWidth:400,initialHeight:400,scale:Object(o.scaleTime)(),domain:void 0,direction:"right",dotRadius:3,formatAxis:d,layerGap:60,labella:{},keyFn:void 0,timeFn:function(t){return t.time},endTimeFn:function(t){return t.end_time},textFn:function(t){return t.text},offsetFn:function(t){return t.offset},offsetTangentFn:function(t){return t.offsetTangent},textOffsetFn:function(t){return t.textOffset},endDotColor:"#009900",dotColor:"#222",labelBgColor:"#222",labelTextColor:"#fff",lineColor:"#222",linkColor:"#222",labelPadding:{left:4,right:4,top:3,bottom:2},textYOffset:"0.85em"})}},{key:"getCustomEventNames",value:function(){return["dotClick","dotMouseover","dotMousemove","dotMouseout","dotMouseenter","dotMouseleave","labelClick","labelMouseover","labelMousemove","labelMouseenter","labelMouseleave","labelMouseout"]}}]),u(e,[{key:"resizeToFit",value:function(){var t=this.options(),e=void 0,n=this.force.nodes();switch(t.direction){case"up":e=Object(a.max)(n,function(t){return Math.abs(t.y)})||0,this.height(e+t.margin.top+t.margin.bottom);break;case"down":e=Object(a.max)(n,function(t){return Math.abs(t.y+t.dy)})||0,this.height(e+t.margin.top+t.margin.bottom);break;case"left":e=Object(a.max)(n,function(t){return Math.abs(t.x)})||0,this.width(e+t.margin.left+t.margin.right);break;case"right":e=Object(a.max)(n,function(t){return Math.abs(t.x+t.dx)})||0,this.width(e+t.margin.left+t.margin.right)}return this}},{key:"updateLabelText",value:function(t,e,n){var r=this.options();return n=n?i.helper.functor(n):d,t.text(function(t){return r.textFn(n(t))}).attr("dy",r.textYOffset).attr("x",r.labelPadding.left).attr("y",r.labelPadding.top),Object.keys(e).forEach(function(r){var o=e[r];t.style(r,function(t,e){return o(n(t),e)})}),t}},{key:"drawAxes",value:function(){var t=this.options(),e=void 0;switch(t.direction){case"right":this.axis=Object(r.axisLeft)(),e="translate(0,0)";break;case"left":this.axis=Object(r.axisRight)(),e="translate("+this.getInnerWidth()+",0)";break;case"up":this.axis=Object(r.axisBottom)(),e="translate(0,"+this.getInnerHeight()+")";break;case"down":this.axis=Object(r.axisTop)(),e="translate(0,0)"}return this.layers.get("main").attr("transform",e),(t.formatAxis||d)(this.axis.scale(t.scale)),this.layers.get("main/axis").call(this.axis),this}},{key:"drawDots",value:function(t){var e=this.options(),n=function(t){return e.scale(e.timeFn(t))},r=this.layers.get("main/dot").selectAll("circle.dot").data(t,e.keyFn),o="left"===e.direction||"right"===e.direction?"cy":"cx",a="cy"===o?"cx":"cy",i="cy"===o?"x":"y",s="cy"===o?"y":"x";if("transparent"===e.dotColor?(r.enter().append("rect").classed("dot",!0).style("stroke",e.lineColor).attr(i,function(t){return e.offsetFn(t)}).attr(s,function(t){return n(t)+e.offsetTangentFn(t)}).attr("width",e.dotRadius).attr("height",1),r.transition().style("stroke",e.lineColor).attr(i,function(t){return e.offsetFn(t)}).attr(s,function(t){return n(t)+e.offsetTangentFn(t)}).attr("width",e.dotRadius).attr("height",1)):(r.enter().append("circle").classed("dot",!0).on("click",this.dispatchAs("dotClick")).on("mouseover",this.dispatchAs("dotMouseover")).on("mousemove",this.dispatchAs("dotMousemove")).on("mouseout",this.dispatchAs("dotMouseout")).on("mouseenter",this.dispatchAs("dotMouseenter")).on("mouseleave",this.dispatchAs("dotMouseleave")).style("fill",e.dotColor).attr("r",e.dotRadius).attr(o,function(t){return n(t)+e.offsetTangentFn(t)}).attr(a,function(t){return e.offsetFn(t)}),r.transition().style("fill",e.dotColor).attr("r",e.dotRadius).attr(o,function(t){return n(t)+e.offsetTangentFn(t)}).attr(a,function(t){return e.offsetFn(t)})),e.endTimeFn){var l=function(t){return e.scale(e.endTimeFn(t))};"transparent"===e.endDotColor?(r.enter().append("rect").classed("dot",!0).style("stroke",e.lineColor).attr(i,function(t){return e.offsetFn(t)}).attr(s,function(t){return l(t)+e.offsetTangentFn(t)}).attr("width",e.dotRadius).attr("height",1),r.transition().style("stroke",e.lineColor).attr(i,function(t){return e.offsetFn(t)}).attr(s,function(t){return l(t)+e.offsetTangentFn(t)}).attr("width",e.dotRadius).attr("height",1)):(r.enter().append("circle").classed("dot",!0).style("fill",e.endDotColor).attr("r",e.dotRadius).attr(o,function(t){return l(t)+e.offsetTangentFn(t)}).attr(a,function(t){return e.offsetFn(t)}),r.transition().style("fill",e.endDotColor).attr("r",e.dotRadius).attr(o,function(t){return l(t)+e.offsetTangentFn(t)}).attr(a,function(t){return e.offsetFn(t)})),r.enter().append("rect").classed("time-duration",!0).style("stroke",e.lineColor).attr(i,function(t){return e.offsetFn(t)}).attr(s,function(t){return n(t)+e.offsetTangentFn(t)}).attr("width",1).attr("height",function(t){return l(t)-n(t)}),r.transition().style("stroke",e.lineColor).attr(i,function(t){return e.offsetFn(t)}).attr(s,function(t){return n(t)+e.offsetTangentFn(t)}).attr("width",1).attr("height",function(t){return l(t)-n(t)})}return r.exit().remove(),this}},{key:"drawLabels",value:function(t,e){var n=this.options(),r=void 0;r="left"===n.direction||"right"===n.direction?Object(a.max)(t,c):Object(a.max)(t,f);var o=new l.a.Renderer({nodeHeight:r,layerGap:n.layerGap,direction:n.direction});function s(t){var e=n.offsetFn(t.data),o=n.offsetTangentFn(t.data)+n.textOffsetFn(t.data);switch(n.direction){case"right":return"translate("+(t.x+e)+","+(o+t.y-t.dy/2)+")";case"left":return"translate("+(t.x+r-t.w-e)+","+(o+t.y-t.dy/2)+")";case"up":return"translate("+(o+t.x-t.dx/2)+","+(t.y+e)+")";case"down":return"translate("+(o+t.x-t.dx/2)+","+(t.y-e)+")"}}o.layout(t);var u=i.helper.functor(n.labelBgColor),d=i.helper.functor(n.linkColor),h=this.layers.get("main/label").selectAll("g.label-g").data(t,n.keyFn?function(t){return n.keyFn(t.data)}:void 0),p=h.enter().append("g").classed("label-g",!0).on("click",this.dispatchAs("labelClick")).on("mouseover",this.dispatchAs("labelMouseover")).on("mousemove",this.dispatchAs("labelMousemove")).on("mouseenter",this.dispatchAs("labelMouseenter")).on("mouseleave",this.dispatchAs("labelMouseleave")).on("mouseout",this.dispatchAs("labelMouseout")).attr("transform",s);p.append("rect").classed("label-bg",!0).attr("rx",2).attr("ry",2).attr("width",c).attr("height",f).style("fill",function(t){return u(t.data)}),p.append("text").classed("label-text",!0).call(this.updateLabelText,e,function(t){return t.data});var b=h.transition().attr("transform",s);b.select("rect").attr("width",c).attr("height",f).style("fill",function(t){return u(t.data)}),b.select("text.label-text").call(this.updateLabelText,e,function(t){return t.data}),h.exit().remove();var g=this.layers.get("main/link").selectAll("path.link").data(t,n.keyFn?function(t){return n.keyFn(t.data)}:void 0);return g.enter().append("path").classed("link",!0).attr("d",function(t){return o.generatePath(t)}).style("stroke",function(t){return d(t.data)}).style("fill","none").attr("transform",function(t){var e=n.offsetFn(t.data),r=n.offsetTangentFn(t.data);return"left"===n.direction||"right"===n.direction?"translate("+e+", "+r+")":"translate("+r+", "+e+")"}),g.transition().attr("d",function(t){return o.generatePath(t)}).style("stroke",function(t){return d(t.data)}).attr("transform",function(t){var e=n.offsetFn(t.data),r=n.offsetTangentFn(t.data);return"left"===n.direction||"right"===n.direction?"translate("+e+", "+r+")":"translate("+r+", "+e+")"}),g.exit().remove(),this}},{key:"visualize",value:function(){var t=this;if(this.hasData()&&this.hasNonZeroArea()){var e=this.data()||[],n=this.options();this.force=new l.a.Force(n.labella),n.domain?n.scale.domain(n.domain):n.scale.domain(Object(a.extent)(e,n.timeFn)).nice(),n.scale.range([0,"left"===n.direction||"right"===n.direction?this.getInnerHeight():this.getInnerWidth()]);var r=i.helper.extend({},n.textStyle);Object.keys(r).forEach(function(t){r[t]=i.helper.functor(r[t])}),r.fill=r.fill||i.helper.functor(n.labelTextColor);var o=this.layers.get("dummy").append("text").classed("label-text",!0),s=e.map(function(e){var a=o.call(t.updateLabelText,r,e).node().getBBox(),i=a.width+n.labelPadding.left+n.labelPadding.right,s=a.height+n.labelPadding.top+n.labelPadding.bottom,u=new l.a.Node(function(t){return n.scale(n.timeFn(t))}(e),"left"===n.direction||"right"===n.direction?s:i,e);return u.w=i,u.h=s,u});return o.remove(),this.force.options(n.labella).nodes(s).compute(),console.log(s),this.drawAxes(),this.drawDots(e),this.drawLabels(this.force.nodes(),r),this}}}]),e}();e.default=h},function(t,e){t.exports=a}]).default});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kM0tpdFRpbWVsaW5lL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9kM0tpdFRpbWVsaW5lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2QzS2l0VGltZWxpbmUvZXh0ZXJuYWwge1wicm9vdFwiOlwiZDNLaXRcIixcImNvbW1vbmpzMlwiOlwiZDNraXRcIixcImNvbW1vbmpzXCI6XCJkM2tpdFwiLFwiYW1kXCI6XCJkM2tpdFwifSIsIndlYnBhY2s6Ly9kM0tpdFRpbWVsaW5lL2V4dGVybmFsIHtcInJvb3RcIjpcImQzXCIsXCJjb21tb25qczJcIjpcImQzLWFycmF5XCIsXCJjb21tb25qc1wiOlwiZDMtYXJyYXlcIixcImFtZFwiOlwiZDMtYXJyYXlcIn0iLCJ3ZWJwYWNrOi8vZDNLaXRUaW1lbGluZS9leHRlcm5hbCB7XCJyb290XCI6XCJkM1wiLFwiY29tbW9uanMyXCI6XCJkMy1heGlzXCIsXCJjb21tb25qc1wiOlwiZDMtYXhpc1wiLFwiYW1kXCI6XCJkMy1heGlzXCJ9Iiwid2VicGFjazovL2QzS2l0VGltZWxpbmUvZXh0ZXJuYWwge1wicm9vdFwiOlwibGFiZWxsYVwiLFwiY29tbW9uanMyXCI6XCJsYWJlbGxhXCIsXCJjb21tb25qc1wiOlwibGFiZWxsYVwiLFwiYW1kXCI6XCJsYWJlbGxhXCJ9Iiwid2VicGFjazovL2QzS2l0VGltZWxpbmUvZXh0ZXJuYWwge1wicm9vdFwiOlwiZDNcIixcImNvbW1vbmpzMlwiOlwiZDMtc2NhbGVcIixcImNvbW1vbmpzXCI6XCJkMy1zY2FsZVwiLFwiYW1kXCI6XCJkMy1zY2FsZVwifSIsIndlYnBhY2s6Ly9kM0tpdFRpbWVsaW5lLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vZDNLaXRUaW1lbGluZS9leHRlcm5hbCB7XCJyb290XCI6XCJkM1wiLFwiY29tbW9uanMyXCI6XCJkMy10cmFuc2l0aW9uXCIsXCJjb21tb25qc1wiOlwiZDMtdHJhbnNpdGlvblwiLFwiYW1kXCI6XCJkMy10cmFuc2l0aW9uXCJ9Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18yX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zX18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX180X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX183X18iLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVjdFdpZHRoIiwidyIsInJlY3RIZWlnaHQiLCJoIiwiaWRlbnRpdHkiLCJUaW1lbGluZSIsImVsZW1lbnQiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJnZXRQcm90b3R5cGVPZiIsImxheWVycyIsIm1haW4iLCJjbGFzc2VkIiwiZm9yY2UiLCJsYWJlbGxhIiwiRm9yY2UiLCJ1cGRhdGVMYWJlbFRleHQiLCJ2aXN1YWxpemUiLCJvbiIsIlN2Z0NoYXJ0IiwiaGVscGVyIiwiZGVlcEV4dGVuZCIsIl9nZXQiLCJtYXJnaW4iLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJpbml0aWFsV2lkdGgiLCJpbml0aWFsSGVpZ2h0Iiwic2NhbGUiLCJzY2FsZVRpbWUiLCJkb21haW4iLCJ1bmRlZmluZWQiLCJkaXJlY3Rpb24iLCJkb3RSYWRpdXMiLCJmb3JtYXRBeGlzIiwibGF5ZXJHYXAiLCJrZXlGbiIsInRpbWVGbiIsInRpbWUiLCJlbmRUaW1lRm4iLCJlbmRfdGltZSIsInRleHRGbiIsInRleHQiLCJvZmZzZXRGbiIsIm9mZnNldCIsIm9mZnNldFRhbmdlbnRGbiIsIm9mZnNldFRhbmdlbnQiLCJ0ZXh0T2Zmc2V0Rm4iLCJ0ZXh0T2Zmc2V0IiwiZW5kRG90Q29sb3IiLCJkb3RDb2xvciIsImxhYmVsQmdDb2xvciIsImxhYmVsVGV4dENvbG9yIiwibGluZUNvbG9yIiwibGlua0NvbG9yIiwibGFiZWxQYWRkaW5nIiwidGV4dFlPZmZzZXQiLCJtYXhWYWwiLCJub2RlcyIsIm1heCIsIk1hdGgiLCJhYnMiLCJ5IiwiaGVpZ2h0IiwiZHkiLCJ4Iiwid2lkdGgiLCJkeCIsInNlbGVjdGlvbiIsInRleHRTdHlsZSIsImFjY2Vzc29yIiwiZnVuY3RvciIsImF0dHIiLCJrZXlzIiwiZm9yRWFjaCIsInN0eWxlRm4iLCJzdHlsZSIsImF4aXNUcmFuc2Zvcm0iLCJheGlzIiwiYXhpc0xlZnQiLCJheGlzUmlnaHQiLCJnZXRJbm5lcldpZHRoIiwiYXhpc0JvdHRvbSIsImdldElubmVySGVpZ2h0IiwiYXhpc1RvcCIsImRhdGEiLCJ0aW1lUG9zIiwic1VwZGF0ZSIsInNlbGVjdEFsbCIsImZpZWxkIiwib3Bwb3NpdGVGaWVsZCIsImZpZWxkQXhpcyIsIm9wcG9zaXRlRmllbGRBeGlzIiwiZW50ZXIiLCJhcHBlbmQiLCJ0cmFuc2l0aW9uIiwiZGlzcGF0Y2hBcyIsImVuZFRpbWVQb3MiLCJleGl0IiwicmVtb3ZlIiwibGFiZWxUZXh0U3R5bGUiLCJub2RlSGVpZ2h0IiwicmVuZGVyZXIiLCJSZW5kZXJlciIsIm5vZGVQb3MiLCJsYXlvdXQiLCJzRW50ZXIiLCJzVHJhbnMiLCJzZWxlY3QiLCJwYXRocyIsImdlbmVyYXRlUGF0aCIsIl90aGlzMiIsImhhc0RhdGEiLCJoYXNOb25aZXJvQXJlYSIsImV4dGVudCIsIm5pY2UiLCJyYW5nZSIsImV4dGVuZCIsImZpbGwiLCJkdW1teVRleHQiLCJtYXAiLCJiYm94Iiwibm9kZSIsImdldEJCb3giLCJOb2RlIiwiY29tcHV0ZSIsImNvbnNvbGUiLCJsb2ciLCJkcmF3QXhlcyIsImRyYXdEb3RzIiwiZHJhd0xhYmVscyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsRUFBQUcsUUFBQSxTQUFBQSxRQUFBLFlBQUFBLFFBQUEsV0FBQUEsUUFBQSxXQUFBQSxRQUFBLFlBQUFBLFFBQUEsa0JBQ0EsbUJBQUFDLGVBQUFDLElBQ0FELE9BQUEsb0VBQUFKLEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsY0FBQUQsRUFBQUcsUUFBQSxTQUFBQSxRQUFBLFlBQUFBLFFBQUEsV0FBQUEsUUFBQSxXQUFBQSxRQUFBLFlBQUFBLFFBQUEsa0JBRUFKLEVBQUEsY0FBQUMsRUFBQUQsRUFBQSxNQUFBQSxFQUFBLEdBQUFBLEVBQUEsR0FBQUEsRUFBQSxRQUFBQSxFQUFBLEdBQUFBLEVBQUEsSUFSQSxDQVNDTyxPQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBZCxRQUdBLElBQUFDLEVBQUFXLEVBQUFFLEdBQUEsQ0FDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBaEIsUUFBQSxJQVVBLE9BTkFpQixFQUFBSCxHQUFBSSxLQUFBakIsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQWEsR0FHQVosRUFBQWUsR0FBQSxFQUdBZixFQUFBRCxRQTBEQSxPQXJE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SSxTQUFDeEosR0FDdEIsSUFBTXlKLEVBQU9GLEVBQ1YxSixLQUFLa0osRUFBS2pHLGdCQUFpQnNGLEVBQWdCcEksR0FDM0MwSixPQUNBQyxVQUNHaEksRUFBSThILEVBQUt2RCxNQUFRakUsRUFBUXNELGFBQWFqQyxLQUFPckIsRUFBUXNELGFBQWFoQyxNQUNsRTFCLEVBQUk0SCxFQUFLMUQsT0FBUzlELEVBQVFzRCxhQUFhL0IsSUFBTXZCLEVBQVFzRCxhQUFhOUIsT0FDbEVpRyxFQUFPLElBQUk5RyxJQUFRZ0gsS0FSWCxTQUFBNUosR0FBQSxPQUFLaUMsRUFBUTJCLE1BQU0zQixFQUFRb0MsT0FBT3JFLElBUzlDc0gsQ0FBUXRILEdBQ2MsU0FBdEJpQyxFQUFRK0IsV0FBOEMsVUFBdEIvQixFQUFRK0IsVUFBd0JuQyxFQUFJRixFQUNwRTNCLEdBSUYsT0FGQTBKLEVBQUsvSCxFQUFJQSxFQUNUK0gsRUFBSzdILEVBQUlBLEVBQ0Y2SCxJQWVULE9BWkFILEVBQVVwQixTQUVWaEcsS0FBS1EsTUFDRlYsUUFBUUEsRUFBUVcsU0FDaEI4QyxNQUFNQSxHQUNObUUsVUFFSEMsUUFBUUMsSUFBSXJFLEdBQ1p2RCxLQUFLNkgsV0FDTDdILEtBQUs4SCxTQUFTNUMsR0FDZGxGLEtBQUsrSCxXQUFXL0gsS0FBS1EsTUFBTStDLFFBQVMwQyxHQUU3QmpHLGVBSUlKLDJCQzVjZm5ELEVBQUFELFFBQUFXIiwiZmlsZSI6ImQza2l0LXRpbWVsaW5lLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImQza2l0XCIpLCByZXF1aXJlKFwiZDMtYXJyYXlcIiksIHJlcXVpcmUoXCJkMy1heGlzXCIpLCByZXF1aXJlKFwibGFiZWxsYVwiKSwgcmVxdWlyZShcImQzLXNjYWxlXCIpLCByZXF1aXJlKFwiZDMtdHJhbnNpdGlvblwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJkM2tpdFwiLCBcImQzLWFycmF5XCIsIFwiZDMtYXhpc1wiLCBcImxhYmVsbGFcIiwgXCJkMy1zY2FsZVwiLCBcImQzLXRyYW5zaXRpb25cIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZDNLaXRUaW1lbGluZVwiXSA9IGZhY3RvcnkocmVxdWlyZShcImQza2l0XCIpLCByZXF1aXJlKFwiZDMtYXJyYXlcIiksIHJlcXVpcmUoXCJkMy1heGlzXCIpLCByZXF1aXJlKFwibGFiZWxsYVwiKSwgcmVxdWlyZShcImQzLXNjYWxlXCIpLCByZXF1aXJlKFwiZDMtdHJhbnNpdGlvblwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiZDNLaXRUaW1lbGluZVwiXSA9IGZhY3Rvcnkocm9vdFtcImQzS2l0XCJdLCByb290W1wiZDNcIl0sIHJvb3RbXCJkM1wiXSwgcm9vdFtcImxhYmVsbGFcIl0sIHJvb3RbXCJkM1wiXSwgcm9vdFtcImQzXCJdKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzJfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fM19fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX180X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzdfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fM19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNF9fOyIsImltcG9ydCB7IGF4aXNMZWZ0LCBheGlzUmlnaHQsIGF4aXNCb3R0b20sIGF4aXNUb3AgfSBmcm9tICdkMy1heGlzJztcbmltcG9ydCB7IHNjYWxlVGltZSB9IGZyb20gJ2QzLXNjYWxlJztcbmltcG9ydCAnZDMtdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBtYXgsIGV4dGVudCB9IGZyb20gJ2QzLWFycmF5JztcbmltcG9ydCB7IFN2Z0NoYXJ0LCBoZWxwZXIgfSBmcm9tICdkM2tpdCc7XG5pbXBvcnQgbGFiZWxsYSBmcm9tICdsYWJlbGxhJztcblxuY29uc3QgcmVjdFdpZHRoID0gZCA9PiBkLnc7XG5jb25zdCByZWN0SGVpZ2h0ID0gZCA9PiBkLmg7XG5jb25zdCBpZGVudGl0eSA9IGQgPT4gZDtcblxuY2xhc3MgVGltZWxpbmUgZXh0ZW5kcyBTdmdDaGFydCB7XG4gIHN0YXRpYyBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgICByZXR1cm4gaGVscGVyLmRlZXBFeHRlbmQoc3VwZXIuZ2V0RGVmYXVsdE9wdGlvbnMoKSwge1xuICAgICAgbWFyZ2luOiB7IGxlZnQ6IDQwLCByaWdodDogMjAsIHRvcDogMjAsIGJvdHRvbTogMjAgfSxcbiAgICAgIGluaXRpYWxXaWR0aDogNDAwLFxuICAgICAgaW5pdGlhbEhlaWdodDogNDAwLFxuICAgICAgc2NhbGU6IHNjYWxlVGltZSgpLFxuICAgICAgZG9tYWluOiB1bmRlZmluZWQsXG4gICAgICBkaXJlY3Rpb246ICdyaWdodCcsXG4gICAgICBkb3RSYWRpdXM6IDMsXG4gICAgICBmb3JtYXRBeGlzOiBpZGVudGl0eSxcbiAgICAgIGxheWVyR2FwOiA2MCxcbiAgICAgIGxhYmVsbGE6IHt9LFxuICAgICAga2V5Rm46IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVGbjogZCA9PiBkLnRpbWUsXG4gICAgICBlbmRUaW1lRm46IGQgPT4gZC5lbmRfdGltZSxcbiAgICAgIHRleHRGbjogZCA9PiBkLnRleHQsXG4gICAgICBvZmZzZXRGbjogZCA9PiBkLm9mZnNldCxcbiAgICAgIG9mZnNldFRhbmdlbnRGbjogZCA9PiBkLm9mZnNldFRhbmdlbnQsXG4gICAgICB0ZXh0T2Zmc2V0Rm46IGQgPT4gZC50ZXh0T2Zmc2V0LFxuICAgICAgZW5kRG90Q29sb3I6ICcjMDA5OTAwJyxcbiAgICAgIGRvdENvbG9yOiAnIzIyMicsXG4gICAgICBsYWJlbEJnQ29sb3I6ICcjMjIyJyxcbiAgICAgIGxhYmVsVGV4dENvbG9yOiAnI2ZmZicsXG4gICAgICBsaW5lQ29sb3I6ICcjMjIyJyxcbiAgICAgIGxpbmtDb2xvcjogJyMyMjInLFxuICAgICAgbGFiZWxQYWRkaW5nOiB7IGxlZnQ6IDQsIHJpZ2h0OiA0LCB0b3A6IDMsIGJvdHRvbTogMiB9LFxuICAgICAgdGV4dFlPZmZzZXQ6ICcwLjg1ZW0nLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldEN1c3RvbUV2ZW50TmFtZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICdkb3RDbGljaycsXG4gICAgICAnZG90TW91c2VvdmVyJyxcbiAgICAgICdkb3RNb3VzZW1vdmUnLFxuICAgICAgJ2RvdE1vdXNlb3V0JyxcbiAgICAgICdkb3RNb3VzZWVudGVyJyxcbiAgICAgICdkb3RNb3VzZWxlYXZlJyxcbiAgICAgICdsYWJlbENsaWNrJyxcbiAgICAgICdsYWJlbE1vdXNlb3ZlcicsXG4gICAgICAnbGFiZWxNb3VzZW1vdmUnLFxuICAgICAgJ2xhYmVsTW91c2VlbnRlcicsXG4gICAgICAnbGFiZWxNb3VzZWxlYXZlJyxcbiAgICAgICdsYWJlbE1vdXNlb3V0JyxcbiAgICBdO1xuICB9XG5cbiAgY29uc3RydWN0b3IoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHN1cGVyKGVsZW1lbnQsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5sYXllcnMuY3JlYXRlKFsnZHVtbXknLCB7IG1haW46IFsnYXhpcycsICdsaW5rJywgJ2xhYmVsJywgJ2RvdCddIH1dKTtcbiAgICB0aGlzLmxheWVycy5nZXQoJ21haW4vYXhpcycpLmNsYXNzZWQoJ2F4aXMnLCB0cnVlKTtcblxuICAgIHRoaXMuZm9yY2UgPSBuZXcgbGFiZWxsYS5Gb3JjZShvcHRpb25zLmxhYmVsbGEpO1xuXG4gICAgdGhpcy51cGRhdGVMYWJlbFRleHQgPSB0aGlzLnVwZGF0ZUxhYmVsVGV4dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudmlzdWFsaXplID0gdGhpcy52aXN1YWxpemUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uKCdkYXRhJywgdGhpcy52aXN1YWxpemUpO1xuICAgIHRoaXMub24oJ29wdGlvbnMnLCB0aGlzLnZpc3VhbGl6ZSk7XG4gICAgdGhpcy5vbigncmVzaXplJywgdGhpcy52aXN1YWxpemUpO1xuICB9XG5cbiAgcmVzaXplVG9GaXQoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucygpO1xuICAgIGxldCBtYXhWYWw7XG4gICAgY29uc3Qgbm9kZXMgPSB0aGlzLmZvcmNlLm5vZGVzKCk7XG5cbiAgICBzd2l0Y2ggKG9wdGlvbnMuZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlICd1cCc6XG4gICAgICAgIG1heFZhbCA9IG1heChub2RlcywgZCA9PiBNYXRoLmFicyhkLnkpKSB8fCAwO1xuICAgICAgICB0aGlzLmhlaWdodChtYXhWYWwgKyBvcHRpb25zLm1hcmdpbi50b3AgKyBvcHRpb25zLm1hcmdpbi5ib3R0b20pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICBtYXhWYWwgPSBtYXgobm9kZXMsIGQgPT4gTWF0aC5hYnMoZC55ICsgZC5keSkpIHx8IDA7XG4gICAgICAgIHRoaXMuaGVpZ2h0KG1heFZhbCArIG9wdGlvbnMubWFyZ2luLnRvcCArIG9wdGlvbnMubWFyZ2luLmJvdHRvbSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIG1heFZhbCA9IG1heChub2RlcywgZCA9PiBNYXRoLmFicyhkLngpKSB8fCAwO1xuICAgICAgICB0aGlzLndpZHRoKG1heFZhbCArIG9wdGlvbnMubWFyZ2luLmxlZnQgKyBvcHRpb25zLm1hcmdpbi5yaWdodCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICBtYXhWYWwgPSBtYXgobm9kZXMsIGQgPT4gTWF0aC5hYnMoZC54ICsgZC5keCkpIHx8IDA7XG4gICAgICAgIHRoaXMud2lkdGgobWF4VmFsICsgb3B0aW9ucy5tYXJnaW4ubGVmdCArIG9wdGlvbnMubWFyZ2luLnJpZ2h0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB1cGRhdGVMYWJlbFRleHQoc2VsZWN0aW9uLCB0ZXh0U3R5bGUsIGFjY2Vzc29yKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucygpO1xuXG4gICAgYWNjZXNzb3IgPSBhY2Nlc3NvciA/IGhlbHBlci5mdW5jdG9yKGFjY2Vzc29yKSA6IGlkZW50aXR5O1xuXG4gICAgc2VsZWN0aW9uXG4gICAgICAudGV4dChkID0+IG9wdGlvbnMudGV4dEZuKGFjY2Vzc29yKGQpKSlcbiAgICAgIC5hdHRyKCdkeScsIG9wdGlvbnMudGV4dFlPZmZzZXQpXG4gICAgICAuYXR0cigneCcsIG9wdGlvbnMubGFiZWxQYWRkaW5nLmxlZnQpXG4gICAgICAuYXR0cigneScsIG9wdGlvbnMubGFiZWxQYWRkaW5nLnRvcCk7XG5cbiAgICBPYmplY3Qua2V5cyh0ZXh0U3R5bGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3Qgc3R5bGVGbiA9IHRleHRTdHlsZVtrZXldO1xuICAgICAgc2VsZWN0aW9uLnN0eWxlKGtleSwgKGQsIGkpID0+IHN0eWxlRm4oYWNjZXNzb3IoZCksIGkpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzZWxlY3Rpb247XG4gIH1cblxuICBkcmF3QXhlcygpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zKCk7XG5cbiAgICBsZXQgYXhpc1RyYW5zZm9ybTtcblxuICAgIHN3aXRjaCAob3B0aW9ucy5kaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgdGhpcy5heGlzID0gYXhpc0xlZnQoKTtcbiAgICAgICAgYXhpc1RyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHswfSwkezB9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgIHRoaXMuYXhpcyA9IGF4aXNSaWdodCgpO1xuICAgICAgICBheGlzVHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3RoaXMuZ2V0SW5uZXJXaWR0aCgpfSwkezB9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndXAnOlxuICAgICAgICB0aGlzLmF4aXMgPSBheGlzQm90dG9tKCk7XG4gICAgICAgIGF4aXNUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7MH0sJHt0aGlzLmdldElubmVySGVpZ2h0KCl9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZG93bic6XG4gICAgICAgIHRoaXMuYXhpcyA9IGF4aXNUb3AoKTtcbiAgICAgICAgYXhpc1RyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHswfSwkezB9KWA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMubGF5ZXJzLmdldCgnbWFpbicpLmF0dHIoJ3RyYW5zZm9ybScsIGF4aXNUcmFuc2Zvcm0pO1xuXG4gICAgY29uc3QgZm9ybWF0QXhpcyA9IG9wdGlvbnMuZm9ybWF0QXhpcyB8fCBpZGVudGl0eTtcblxuICAgIGZvcm1hdEF4aXModGhpcy5heGlzLnNjYWxlKG9wdGlvbnMuc2NhbGUpKTtcblxuICAgIHRoaXMubGF5ZXJzLmdldCgnbWFpbi9heGlzJykuY2FsbCh0aGlzLmF4aXMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBkcmF3RG90cyhkYXRhKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucygpO1xuICAgIGNvbnN0IHRpbWVQb3MgPSBkID0+IG9wdGlvbnMuc2NhbGUob3B0aW9ucy50aW1lRm4oZCkpO1xuXG4gICAgY29uc3Qgc1VwZGF0ZSA9IHRoaXMubGF5ZXJzXG4gICAgICAuZ2V0KCdtYWluL2RvdCcpXG4gICAgICAuc2VsZWN0QWxsKCdjaXJjbGUuZG90JylcbiAgICAgIC5kYXRhKGRhdGEsIG9wdGlvbnMua2V5Rm4pO1xuXG4gICAgY29uc3QgZmllbGQgPSBvcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2xlZnQnIHx8IG9wdGlvbnMuZGlyZWN0aW9uID09PSAncmlnaHQnID8gJ2N5JyA6ICdjeCc7XG4gICAgY29uc3Qgb3Bwb3NpdGVGaWVsZCA9IGZpZWxkID09PSAnY3knID8gJ2N4JyA6ICdjeSc7XG5cbiAgICBjb25zdCBmaWVsZEF4aXMgPSBmaWVsZCA9PT0gJ2N5JyA/ICd4JyA6ICd5JztcbiAgICBjb25zdCBvcHBvc2l0ZUZpZWxkQXhpcyA9IGZpZWxkID09PSAnY3knID8gJ3knIDogJ3gnO1xuICAgIGlmIChvcHRpb25zLmRvdENvbG9yID09PSAndHJhbnNwYXJlbnQnKSB7XG4gICAgICBzVXBkYXRlXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAuY2xhc3NlZCgnZG90JywgdHJ1ZSlcbiAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBvcHRpb25zLmxpbmVDb2xvcilcbiAgICAgICAgLmF0dHIoZmllbGRBeGlzLCBkID0+IG9wdGlvbnMub2Zmc2V0Rm4oZCkpXG4gICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgb3B0aW9ucy5kb3RSYWRpdXMpXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCAxKTtcblxuICAgICAgc1VwZGF0ZVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgb3B0aW9ucy5saW5lQ29sb3IpXG4gICAgICAgIC5hdHRyKGZpZWxkQXhpcywgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKVxuICAgICAgICAuYXR0cihvcHBvc2l0ZUZpZWxkQXhpcywgZCA9PiB0aW1lUG9zKGQpICsgb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZCkpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIG9wdGlvbnMuZG90UmFkaXVzKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNVcGRhdGVcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgLmNsYXNzZWQoJ2RvdCcsIHRydWUpXG4gICAgICAgIC5vbignY2xpY2snLCB0aGlzLmRpc3BhdGNoQXMoJ2RvdENsaWNrJykpXG4gICAgICAgIC5vbignbW91c2VvdmVyJywgdGhpcy5kaXNwYXRjaEFzKCdkb3RNb3VzZW92ZXInKSlcbiAgICAgICAgLm9uKCdtb3VzZW1vdmUnLCB0aGlzLmRpc3BhdGNoQXMoJ2RvdE1vdXNlbW92ZScpKVxuICAgICAgICAub24oJ21vdXNlb3V0JywgdGhpcy5kaXNwYXRjaEFzKCdkb3RNb3VzZW91dCcpKVxuICAgICAgICAub24oJ21vdXNlZW50ZXInLCB0aGlzLmRpc3BhdGNoQXMoJ2RvdE1vdXNlZW50ZXInKSlcbiAgICAgICAgLm9uKCdtb3VzZWxlYXZlJywgdGhpcy5kaXNwYXRjaEFzKCdkb3RNb3VzZWxlYXZlJykpXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIG9wdGlvbnMuZG90Q29sb3IpXG4gICAgICAgIC5hdHRyKCdyJywgb3B0aW9ucy5kb3RSYWRpdXMpXG4gICAgICAgIC5hdHRyKGZpZWxkLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIob3Bwb3NpdGVGaWVsZCwgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKTtcblxuICAgICAgc1VwZGF0ZVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5zdHlsZSgnZmlsbCcsIG9wdGlvbnMuZG90Q29sb3IpXG4gICAgICAgIC5hdHRyKCdyJywgb3B0aW9ucy5kb3RSYWRpdXMpXG4gICAgICAgIC5hdHRyKGZpZWxkLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIob3Bwb3NpdGVGaWVsZCwgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKTtcbiAgICB9XG4gICAgLypcblxuKi9cbiAgICBpZiAob3B0aW9ucy5lbmRUaW1lRm4pIHtcbiAgICAgIGNvbnN0IGVuZFRpbWVQb3MgPSBkID0+IG9wdGlvbnMuc2NhbGUob3B0aW9ucy5lbmRUaW1lRm4oZCkpO1xuXG4gICAgICBpZiAob3B0aW9ucy5lbmREb3RDb2xvciA9PT0gJ3RyYW5zcGFyZW50Jykge1xuICAgICAgICBzVXBkYXRlXG4gICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAuY2xhc3NlZCgnZG90JywgdHJ1ZSlcbiAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIG9wdGlvbnMubGluZUNvbG9yKVxuICAgICAgICAgIC5hdHRyKGZpZWxkQXhpcywgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKVxuICAgICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IGVuZFRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBvcHRpb25zLmRvdFJhZGl1cylcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMSk7XG5cbiAgICAgICAgc1VwZGF0ZVxuICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIG9wdGlvbnMubGluZUNvbG9yKVxuICAgICAgICAgIC5hdHRyKGZpZWxkQXhpcywgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKVxuICAgICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IGVuZFRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCBvcHRpb25zLmRvdFJhZGl1cylcbiAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzVXBkYXRlXG4gICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgICAgIC5jbGFzc2VkKCdkb3QnLCB0cnVlKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIG9wdGlvbnMuZW5kRG90Q29sb3IpXG4gICAgICAgICAgLmF0dHIoJ3InLCBvcHRpb25zLmRvdFJhZGl1cylcbiAgICAgICAgICAuYXR0cihmaWVsZCwgZCA9PiBlbmRUaW1lUG9zKGQpICsgb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZCkpXG4gICAgICAgICAgLmF0dHIob3Bwb3NpdGVGaWVsZCwgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKTtcblxuICAgICAgICBzVXBkYXRlXG4gICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIG9wdGlvbnMuZW5kRG90Q29sb3IpXG4gICAgICAgICAgLmF0dHIoJ3InLCBvcHRpb25zLmRvdFJhZGl1cylcbiAgICAgICAgICAuYXR0cihmaWVsZCwgZCA9PiBlbmRUaW1lUG9zKGQpICsgb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZCkpXG4gICAgICAgICAgLmF0dHIob3Bwb3NpdGVGaWVsZCwgZCA9PiBvcHRpb25zLm9mZnNldEZuKGQpKTtcbiAgICAgIH1cbiAgICAgIHNVcGRhdGVcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgIC5jbGFzc2VkKCd0aW1lLWR1cmF0aW9uJywgdHJ1ZSlcbiAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBvcHRpb25zLmxpbmVDb2xvcilcbiAgICAgICAgLmF0dHIoZmllbGRBeGlzLCBkID0+IG9wdGlvbnMub2Zmc2V0Rm4oZCkpXG4gICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgMSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGQgPT4gZW5kVGltZVBvcyhkKSAtIHRpbWVQb3MoZCkpO1xuXG4gICAgICBzVXBkYXRlXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBvcHRpb25zLmxpbmVDb2xvcilcbiAgICAgICAgLmF0dHIoZmllbGRBeGlzLCBkID0+IG9wdGlvbnMub2Zmc2V0Rm4oZCkpXG4gICAgICAgIC5hdHRyKG9wcG9zaXRlRmllbGRBeGlzLCBkID0+IHRpbWVQb3MoZCkgKyBvcHRpb25zLm9mZnNldFRhbmdlbnRGbihkKSlcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgMSlcbiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGQgPT4gZW5kVGltZVBvcyhkKSAtIHRpbWVQb3MoZCkpO1xuICAgIH1cblxuICAgIHNVcGRhdGUuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBkcmF3TGFiZWxzKG5vZGVzLCBsYWJlbFRleHRTdHlsZSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMoKTtcbiAgICBsZXQgbm9kZUhlaWdodDtcbiAgICBpZiAob3B0aW9ucy5kaXJlY3Rpb24gPT09ICdsZWZ0JyB8fCBvcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgbm9kZUhlaWdodCA9IG1heChub2RlcywgcmVjdFdpZHRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZUhlaWdodCA9IG1heChub2RlcywgcmVjdEhlaWdodCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgbGFiZWxsYS5SZW5kZXJlcih7XG4gICAgICBub2RlSGVpZ2h0LFxuICAgICAgbGF5ZXJHYXA6IG9wdGlvbnMubGF5ZXJHYXAsXG4gICAgICBkaXJlY3Rpb246IG9wdGlvbnMuZGlyZWN0aW9uLFxuICAgIH0pO1xuXG4gICAgcmVuZGVyZXIubGF5b3V0KG5vZGVzKTtcblxuICAgIGZ1bmN0aW9uIG5vZGVQb3MoZCkge1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXRGbihkLmRhdGEpO1xuICAgICAgY29uc3Qgb2Zmc2V0VGFuZ2VudCA9IG9wdGlvbnMub2Zmc2V0VGFuZ2VudEZuKGQuZGF0YSkgKyBvcHRpb25zLnRleHRPZmZzZXRGbihkLmRhdGEpO1xuXG4gICAgICBzd2l0Y2ggKG9wdGlvbnMuZGlyZWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke2QueCArIG9mZnNldH0sJHtvZmZzZXRUYW5nZW50ICsgZC55IC0gZC5keSAvIDJ9KWA7XG4gICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgIHJldHVybiBgdHJhbnNsYXRlKCR7ZC54ICsgbm9kZUhlaWdodCAtIGQudyAtIG9mZnNldH0sJHtvZmZzZXRUYW5nZW50ICsgZC55IC0gZC5keSAvIDJ9KWA7XG4gICAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldFRhbmdlbnQgKyBkLnggLSBkLmR4IC8gMn0sJHtkLnkgKyBvZmZzZXR9KWA7XG4gICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICAgIHJldHVybiBgdHJhbnNsYXRlKCR7b2Zmc2V0VGFuZ2VudCArIGQueCAtIGQuZHggLyAyfSwke2QueSAtIG9mZnNldH0pYDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsYWJlbEJnQ29sb3IgPSBoZWxwZXIuZnVuY3RvcihvcHRpb25zLmxhYmVsQmdDb2xvcik7XG4gICAgY29uc3QgbGlua0NvbG9yID0gaGVscGVyLmZ1bmN0b3Iob3B0aW9ucy5saW5rQ29sb3IpO1xuXG4gICAgLy8gRHJhdyBsYWJlbCByZWN0YW5nbGVzXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gdGhpcy5sYXllcnNcbiAgICAgIC5nZXQoJ21haW4vbGFiZWwnKVxuICAgICAgLnNlbGVjdEFsbCgnZy5sYWJlbC1nJylcbiAgICAgIC5kYXRhKG5vZGVzLCBvcHRpb25zLmtleUZuID8gZCA9PiBvcHRpb25zLmtleUZuKGQuZGF0YSkgOiB1bmRlZmluZWQpO1xuXG4gICAgY29uc3Qgc0VudGVyID0gc2VsZWN0aW9uXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAuY2xhc3NlZCgnbGFiZWwtZycsIHRydWUpXG4gICAgICAub24oJ2NsaWNrJywgdGhpcy5kaXNwYXRjaEFzKCdsYWJlbENsaWNrJykpXG4gICAgICAub24oJ21vdXNlb3ZlcicsIHRoaXMuZGlzcGF0Y2hBcygnbGFiZWxNb3VzZW92ZXInKSlcbiAgICAgIC5vbignbW91c2Vtb3ZlJywgdGhpcy5kaXNwYXRjaEFzKCdsYWJlbE1vdXNlbW92ZScpKVxuICAgICAgLm9uKCdtb3VzZWVudGVyJywgdGhpcy5kaXNwYXRjaEFzKCdsYWJlbE1vdXNlZW50ZXInKSlcbiAgICAgIC5vbignbW91c2VsZWF2ZScsIHRoaXMuZGlzcGF0Y2hBcygnbGFiZWxNb3VzZWxlYXZlJykpXG4gICAgICAub24oJ21vdXNlb3V0JywgdGhpcy5kaXNwYXRjaEFzKCdsYWJlbE1vdXNlb3V0JykpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgbm9kZVBvcyk7XG5cbiAgICBzRW50ZXJcbiAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgLmNsYXNzZWQoJ2xhYmVsLWJnJywgdHJ1ZSlcbiAgICAgIC5hdHRyKCdyeCcsIDIpXG4gICAgICAuYXR0cigncnknLCAyKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgcmVjdFdpZHRoKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIHJlY3RIZWlnaHQpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGxhYmVsQmdDb2xvcihkLmRhdGEpKTtcblxuICAgIHNFbnRlclxuICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAuY2xhc3NlZCgnbGFiZWwtdGV4dCcsIHRydWUpXG4gICAgICAuY2FsbCh0aGlzLnVwZGF0ZUxhYmVsVGV4dCwgbGFiZWxUZXh0U3R5bGUsIGQgPT4gZC5kYXRhKTtcblxuICAgIGNvbnN0IHNUcmFucyA9IHNlbGVjdGlvbi50cmFuc2l0aW9uKCkuYXR0cigndHJhbnNmb3JtJywgbm9kZVBvcyk7XG5cbiAgICBzVHJhbnNcbiAgICAgIC5zZWxlY3QoJ3JlY3QnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgcmVjdFdpZHRoKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIHJlY3RIZWlnaHQpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGxhYmVsQmdDb2xvcihkLmRhdGEpKTtcblxuICAgIHNUcmFucy5zZWxlY3QoJ3RleHQubGFiZWwtdGV4dCcpLmNhbGwodGhpcy51cGRhdGVMYWJlbFRleHQsIGxhYmVsVGV4dFN0eWxlLCBkID0+IGQuZGF0YSk7XG5cbiAgICBzZWxlY3Rpb24uZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgLy8gRHJhdyBwYXRoIGZyb20gcG9pbnQgb24gdGhlIHRpbWVsaW5lIHRvIHRoZSBsYWJlbCByZWN0YW5nbGVcbiAgICBjb25zdCBwYXRocyA9IHRoaXMubGF5ZXJzXG4gICAgICAuZ2V0KCdtYWluL2xpbmsnKVxuICAgICAgLnNlbGVjdEFsbCgncGF0aC5saW5rJylcbiAgICAgIC5kYXRhKG5vZGVzLCBvcHRpb25zLmtleUZuID8gZCA9PiBvcHRpb25zLmtleUZuKGQuZGF0YSkgOiB1bmRlZmluZWQpO1xuXG4gICAgcGF0aHNcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5jbGFzc2VkKCdsaW5rJywgdHJ1ZSlcbiAgICAgIC5hdHRyKCdkJywgZCA9PiByZW5kZXJlci5nZW5lcmF0ZVBhdGgoZCkpXG4gICAgICAuc3R5bGUoJ3N0cm9rZScsIGQgPT4gbGlua0NvbG9yKGQuZGF0YSkpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCAnbm9uZScpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpID0+IHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXRGbihkLmRhdGEpO1xuICAgICAgICBjb25zdCBvZmZzZXRUYW5nZW50ID0gb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZC5kYXRhKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlyZWN0aW9uID09PSAnbGVmdCcgfHwgb3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldH0sICR7b2Zmc2V0VGFuZ2VudH0pYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldFRhbmdlbnR9LCAke29mZnNldH0pYDtcbiAgICAgIH0pO1xuXG4gICAgcGF0aHNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5hdHRyKCdkJywgZCA9PiByZW5kZXJlci5nZW5lcmF0ZVBhdGgoZCkpXG4gICAgICAuc3R5bGUoJ3N0cm9rZScsIGQgPT4gbGlua0NvbG9yKGQuZGF0YSkpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgKGQpID0+IHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXRGbihkLmRhdGEpO1xuICAgICAgICBjb25zdCBvZmZzZXRUYW5nZW50ID0gb3B0aW9ucy5vZmZzZXRUYW5nZW50Rm4oZC5kYXRhKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlyZWN0aW9uID09PSAnbGVmdCcgfHwgb3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldH0sICR7b2Zmc2V0VGFuZ2VudH0pYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke29mZnNldFRhbmdlbnR9LCAke29mZnNldH0pYDtcbiAgICAgIH0pO1xuXG4gICAgcGF0aHMuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB2aXN1YWxpemUoKSB7XG4gICAgaWYgKCF0aGlzLmhhc0RhdGEoKSB8fCAhdGhpcy5oYXNOb25aZXJvQXJlYSgpKSByZXR1cm47XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhKCkgfHwgW107XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucygpO1xuICAgIHRoaXMuZm9yY2UgPSBuZXcgbGFiZWxsYS5Gb3JjZShvcHRpb25zLmxhYmVsbGEpO1xuXG4gICAgaWYgKG9wdGlvbnMuZG9tYWluKSB7XG4gICAgICBvcHRpb25zLnNjYWxlLmRvbWFpbihvcHRpb25zLmRvbWFpbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMuc2NhbGUuZG9tYWluKGV4dGVudChkYXRhLCBvcHRpb25zLnRpbWVGbikpLm5pY2UoKTtcbiAgICB9XG4gICAgb3B0aW9ucy5zY2FsZS5yYW5nZShbXG4gICAgICAwLFxuICAgICAgb3B0aW9ucy5kaXJlY3Rpb24gPT09ICdsZWZ0JyB8fCBvcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3JpZ2h0J1xuICAgICAgICA/IHRoaXMuZ2V0SW5uZXJIZWlnaHQoKVxuICAgICAgICA6IHRoaXMuZ2V0SW5uZXJXaWR0aCgpLFxuICAgIF0pO1xuXG4gICAgY29uc3QgbGFiZWxUZXh0U3R5bGUgPSBoZWxwZXIuZXh0ZW5kKHt9LCBvcHRpb25zLnRleHRTdHlsZSk7XG4gICAgT2JqZWN0LmtleXMobGFiZWxUZXh0U3R5bGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgbGFiZWxUZXh0U3R5bGVba2V5XSA9IGhlbHBlci5mdW5jdG9yKGxhYmVsVGV4dFN0eWxlW2tleV0pO1xuICAgIH0pO1xuICAgIC8vIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgbGFiZWxUZXh0U3R5bGUuZmlsbCA9IGxhYmVsVGV4dFN0eWxlLmZpbGwgfHwgaGVscGVyLmZ1bmN0b3Iob3B0aW9ucy5sYWJlbFRleHRDb2xvcik7XG5cbiAgICBjb25zdCBkdW1teVRleHQgPSB0aGlzLmxheWVyc1xuICAgICAgLmdldCgnZHVtbXknKVxuICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAuY2xhc3NlZCgnbGFiZWwtdGV4dCcsIHRydWUpO1xuXG4gICAgY29uc3QgdGltZVBvcyA9IGQgPT4gb3B0aW9ucy5zY2FsZShvcHRpb25zLnRpbWVGbihkKSk7XG4gICAgY29uc3Qgbm9kZXMgPSBkYXRhLm1hcCgoZCkgPT4ge1xuICAgICAgY29uc3QgYmJveCA9IGR1bW15VGV4dFxuICAgICAgICAuY2FsbCh0aGlzLnVwZGF0ZUxhYmVsVGV4dCwgbGFiZWxUZXh0U3R5bGUsIGQpXG4gICAgICAgIC5ub2RlKClcbiAgICAgICAgLmdldEJCb3goKTtcbiAgICAgIGNvbnN0IHcgPSBiYm94LndpZHRoICsgb3B0aW9ucy5sYWJlbFBhZGRpbmcubGVmdCArIG9wdGlvbnMubGFiZWxQYWRkaW5nLnJpZ2h0O1xuICAgICAgY29uc3QgaCA9IGJib3guaGVpZ2h0ICsgb3B0aW9ucy5sYWJlbFBhZGRpbmcudG9wICsgb3B0aW9ucy5sYWJlbFBhZGRpbmcuYm90dG9tO1xuICAgICAgY29uc3Qgbm9kZSA9IG5ldyBsYWJlbGxhLk5vZGUoXG4gICAgICAgIHRpbWVQb3MoZCksXG4gICAgICAgIG9wdGlvbnMuZGlyZWN0aW9uID09PSAnbGVmdCcgfHwgb3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyaWdodCcgPyBoIDogdyxcbiAgICAgICAgZCxcbiAgICAgICk7XG4gICAgICBub2RlLncgPSB3O1xuICAgICAgbm9kZS5oID0gaDtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0pO1xuXG4gICAgZHVtbXlUZXh0LnJlbW92ZSgpO1xuXG4gICAgdGhpcy5mb3JjZVxuICAgICAgLm9wdGlvbnMob3B0aW9ucy5sYWJlbGxhKVxuICAgICAgLm5vZGVzKG5vZGVzKVxuICAgICAgLmNvbXB1dGUoKTtcblxuICAgIGNvbnNvbGUubG9nKG5vZGVzKTtcbiAgICB0aGlzLmRyYXdBeGVzKCk7XG4gICAgdGhpcy5kcmF3RG90cyhkYXRhKTtcbiAgICB0aGlzLmRyYXdMYWJlbHModGhpcy5mb3JjZS5ub2RlcygpLCBsYWJlbFRleHRTdHlsZSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaW1lbGluZTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fN19fOyJdLCJzb3VyY2VSb290IjoiIn0=